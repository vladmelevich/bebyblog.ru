{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wlad\\\\OneDrive\\\\Desktop\\\\kwork_site\\\\src\\\\components\\\\FriendsPage\\\\FriendsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback, memo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faMapMarkerAlt, faCalendar, faUserPlus, faUserMinus, faSearch, faUsers, faUserFriends, faBell, faCheck, faTimes, faMessage, faHeart, faComment } from '@fortawesome/free-solid-svg-icons';\nimport ChatModal from '../ChatModal/ChatModal';\nimport { makeAuthenticatedRequest } from '../../utils/auth';\nimport './FriendsPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FriendsPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('search');\n  const [notifications, setNotifications] = useState([]);\n  const [notificationsLoading, setNotificationsLoading] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const isLoggedIn = () => {\n    return !!(localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken'));\n  };\n\n  // Мемоизируем количество непрочитанных уведомлений\n  const unreadNotificationsCount = useMemo(() => {\n    return notifications.filter(n => !n.is_read).length;\n  }, [notifications]);\n\n  // Загрузка уведомлений\n  const fetchNotifications = useCallback(async () => {\n    setNotificationsLoading(true);\n    try {\n      const response = await makeAuthenticatedRequest('http://localhost:8000/api/users/notifications/');\n      if (response.ok) {\n        const data = await response.json();\n        setNotifications(data.notifications || []);\n      } else {\n        console.error('Ошибка загрузки уведомлений');\n        setNotifications([]);\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки уведомлений:', error);\n      setNotifications([]);\n    } finally {\n      setNotificationsLoading(false);\n    }\n  }, []);\n\n  // Отметить уведомление как прочитанное\n  const markNotificationAsRead = useCallback(async notificationId => {\n    try {\n      const response = await makeAuthenticatedRequest(`http://localhost:8000/api/users/notifications/${notificationId}/read/`, {\n        method: 'POST'\n      });\n      if (response.ok) {\n        // Обновляем список уведомлений\n        fetchNotifications();\n      }\n    } catch (error) {\n      console.error('Ошибка отметки уведомления:', error);\n    }\n  }, [fetchNotifications]);\n\n  // Отметить все уведомления как прочитанные\n  const markAllNotificationsAsRead = useCallback(async () => {\n    try {\n      const response = await makeAuthenticatedRequest('http://localhost:8000/api/users/notifications/mark-all-read/', {\n        method: 'POST'\n      });\n      if (response.ok) {\n        // Обновляем список уведомлений\n        fetchNotifications();\n      }\n    } catch (error) {\n      console.error('Ошибка отметки всех уведомлений:', error);\n    }\n  }, [fetchNotifications]);\n  const searchUsers = async () => {\n    if (!searchQuery.trim()) return;\n    setSearchLoading(true);\n    try {\n      // Убираем символ @ если пользователь его ввел\n      const cleanQuery = searchQuery.replace('@', '');\n      const response = await makeAuthenticatedRequest(`http://localhost:8000/api/users/search/?q=${encodeURIComponent(cleanQuery)}`);\n      if (response.ok) {\n        const data = await response.json();\n        console.log('Результаты поиска пользователей:', data);\n        console.log('Пользователи из API:', data.users);\n        setSearchResults(data.users || []);\n      } else {\n        console.error('Ошибка поиска пользователей:', response.status);\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error('Ошибка поиска:', error);\n      setSearchResults([]);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n  const handleFollow = async userId => {\n    try {\n      const response = await makeAuthenticatedRequest(`http://localhost:8000/api/users/follow/${userId}/`, {\n        method: 'POST'\n      });\n      if (response.ok) {\n        // Обновляем поиск\n        searchUsers();\n      }\n    } catch (error) {\n      console.error('Ошибка подписки:', error);\n    }\n  };\n  const handleUnfollow = async userId => {\n    try {\n      const response = await makeAuthenticatedRequest(`http://localhost:8000/api/users/unfollow/${userId}/`, {\n        method: 'POST'\n      });\n      if (response.ok) {\n        // Обновляем поиск\n        searchUsers();\n      }\n    } catch (error) {\n      console.error('Ошибка отписки:', error);\n    }\n  };\n  const handleStartChat = async (userId, userName) => {\n    // Открываем модальное окно чата\n    setSelectedUser({\n      id: userId,\n      name: userName\n    });\n    setModalOpen(true);\n  };\n  const getAuthorInitials = authorName => {\n    var _names$, _names$2;\n    if (!authorName) return 'А';\n    const names = authorName.split(' ');\n    return `${((_names$ = names[0]) === null || _names$ === void 0 ? void 0 : _names$.charAt(0)) || 'А'}${((_names$2 = names[1]) === null || _names$2 === void 0 ? void 0 : _names$2.charAt(0)) || ''}`.toUpperCase();\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'Недавно';\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));\n    if (diffInHours < 1) return 'Только что';\n    if (diffInHours < 24) return `${diffInHours} ч назад`;\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays < 7) return `${diffInDays} дн назад`;\n    return date.toLocaleDateString('ru-RU');\n  };\n  const renderUserCard = user => {\n    console.log('Рендерим карточку пользователя:', user);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-card clickable\",\n      onClick: () => {\n        console.log('Клик по карточке пользователя:', user);\n        console.log('Текущий URL:', window.location.href);\n        if (user.id) {\n          console.log('Переходим на профиль пользователя ID:', user.id);\n          const targetUrl = `/user/${user.id}`;\n          console.log('Целевой URL:', targetUrl);\n          navigate(targetUrl);\n        } else {\n          console.error('ID пользователя не найден:', user);\n        }\n      },\n      title: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044E\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-avatar\",\n          onClick: e => {\n            e.stopPropagation(); // Предотвращаем всплытие события\n            console.log('Клик по аватару пользователя:', user);\n            if (user.id) {\n              console.log('Переходим на профиль пользователя ID:', user.id);\n              navigate(`/user/${user.id}`);\n            } else {\n              console.error('ID пользователя не найден:', user);\n            }\n          },\n          title: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044E\",\n          children: user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: user.avatar,\n            alt: user.first_name || user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avatar-placeholder\",\n            children: getAuthorInitials(user.first_name || user.username)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"user-name\",\n            onClick: e => {\n              e.stopPropagation(); // Предотвращаем всплытие события\n              console.log('Клик по имени пользователя:', user);\n              if (user.id) {\n                console.log('Переходим на профиль пользователя ID:', user.id);\n                navigate(`/user/${user.id}`);\n              } else {\n                console.error('ID пользователя не найден:', user);\n              }\n            },\n            title: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044E\",\n            children: user.first_name || user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-login\",\n            children: [\"@\", user.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"user-location\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faMapMarkerAlt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 15\n              }, this), user.city || 'Не указан']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"user-join-date\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faCalendar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 15\n              }, this), formatDate(user.date_joined)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chat-btn\",\n          onClick: e => {\n            e.stopPropagation();\n            const userName = `${user.first_name} ${user.last_name}`.trim() || user.username || 'Пользователь';\n            handleStartChat(user.id, userName);\n          },\n          title: \"\\u041D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 11\n          }, this), \"\\u041D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 9\n        }, this), user.is_following ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"unfollow-btn\",\n          onClick: e => {\n            e.stopPropagation();\n            handleUnfollow(user.id);\n          },\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faUserMinus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), \"\\u041E\\u0442\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"follow-btn\",\n          onClick: e => {\n            e.stopPropagation();\n            handleFollow(user.id);\n          },\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faUserPlus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 7\n      }, this)]\n    }, user.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this);\n  };\n  const renderNotification = notification => {\n    var _notification$sender2, _notification$sender3, _notification$sender4;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `notification-card ${!notification.is_read ? 'unread' : ''}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notification-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-avatar clickable\",\n          onClick: () => {\n            var _notification$sender;\n            if ((_notification$sender = notification.sender) !== null && _notification$sender !== void 0 && _notification$sender.id) {\n              navigate(`/user/${notification.sender.id}`);\n            } else {\n              console.error('ID отправителя уведомления не найден:', notification);\n            }\n          },\n          title: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044E\",\n          children: (_notification$sender2 = notification.sender) !== null && _notification$sender2 !== void 0 && _notification$sender2.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: notification.sender.avatar,\n            alt: notification.sender.first_name || notification.sender.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avatar-placeholder\",\n            children: getAuthorInitials(((_notification$sender3 = notification.sender) === null || _notification$sender3 === void 0 ? void 0 : _notification$sender3.first_name) || ((_notification$sender4 = notification.sender) === null || _notification$sender4 === void 0 ? void 0 : _notification$sender4.username))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notification-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notification-content\",\n              children: [notification.notification_type === 'message' && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faMessage,\n                className: \"notification-icon message-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), notification.notification_type === 'follow' && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faUserPlus,\n                className: \"notification-icon follow-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this), notification.notification_type === 'like' && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faHeart,\n                className: \"notification-icon like-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), notification.notification_type === 'comment' && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faComment,\n                className: \"notification-icon comment-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"notification-text\",\n                children: notification.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 13\n            }, this), notification.post_info && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notification-post-link clickable\",\n              onClick: () => navigate(`/post/${notification.post_info.slug}`),\n              title: \"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u043A \\u043F\\u043E\\u0441\\u0442\\u0443\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"post-title\",\n                children: [\"\\\"\", notification.post_info.title, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this), notification.post_info.category && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"post-category\",\n                children: [\" \\u0432 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 \", notification.post_info.category]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), notification.notification_type === 'message' && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"open-chat-btn\",\n              onClick: () => {\n                var _notification$sender5, _notification$sender6, _notification$sender7, _notification$sender8;\n                const userName = `${(_notification$sender5 = notification.sender) === null || _notification$sender5 === void 0 ? void 0 : _notification$sender5.first_name} ${(_notification$sender6 = notification.sender) === null || _notification$sender6 === void 0 ? void 0 : _notification$sender6.last_name}`.trim() || ((_notification$sender7 = notification.sender) === null || _notification$sender7 === void 0 ? void 0 : _notification$sender7.username) || 'Пользователь';\n                handleStartChat((_notification$sender8 = notification.sender) === null || _notification$sender8 === void 0 ? void 0 : _notification$sender8.id, userName);\n              },\n              title: \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0447\\u0430\\u0442\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this), \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0447\\u0430\\u0442\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notification-time\",\n            children: formatDate(notification.created_at)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 9\n        }, this), !notification.is_read && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mark-read-btn\",\n          onClick: () => markNotificationAsRead(notification.id),\n          title: \"\\u041E\\u0442\\u043C\\u0435\\u0442\\u0438\\u0442\\u044C \\u043A\\u0430\\u043A \\u043F\\u0440\\u043E\\u0447\\u0438\\u0442\\u0430\\u043D\\u043D\\u043E\\u0435\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faCheck\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 7\n      }, this)\n    }, notification.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 5\n    }, this);\n  };\n\n  // Загружаем уведомления при переключении на вкладку\n  useEffect(() => {\n    if (activeTab === 'notifications') {\n      fetchNotifications();\n    }\n  }, [activeTab, fetchNotifications]);\n\n  // Автоматическое обновление уведомлений каждые 30 секунд\n  useEffect(() => {\n    let intervalId;\n    if (activeTab === 'notifications') {\n      intervalId = setInterval(() => {\n        fetchNotifications();\n      }, 30000); // 30 секунд\n    }\n\n    // Cleanup функция для очистки интервала\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [activeTab, fetchNotifications]);\n  if (!isLoggedIn()) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"friends-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-required\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0414\\u043B\\u044F \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u0434\\u0440\\u0443\\u0437\\u0435\\u0439 \\u0438 \\u0443\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u0439 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0432\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"auth-btn\",\n            onClick: () => navigate('/auth'),\n            children: \"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"friends-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"friends-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"btn-back\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faArrowLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), \"\\u041D\\u0430\\u0437\\u0430\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"friends-title\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faUserFriends\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), \"\\u0414\\u0440\\u0443\\u0437\\u044C\\u044F\", unreadNotificationsCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"header-notification-badge\",\n            children: unreadNotificationsCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"friends-tabs\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `tab ${activeTab === 'search' ? 'active' : ''}`,\n            onClick: () => setActiveTab('search'),\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 15\n            }, this), \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `tab ${activeTab === 'notifications' ? 'active' : ''}`,\n            onClick: () => setActiveTab('notifications'),\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faBell\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this), \"\\u0423\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F\", unreadNotificationsCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"notification-badge\",\n              children: unreadNotificationsCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), activeTab === 'search' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u041D\\u0430\\u0439\\u0442\\u0438 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u0418\\u0449\\u0438\\u0442\\u0435 \\u043F\\u043E \\u0438\\u043C\\u0435\\u043D\\u0438 \\u0438\\u043B\\u0438 \\u043B\\u043E\\u0433\\u0438\\u043D\\u0443 (\\u0441 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u043C @ \\u0438\\u043B\\u0438 \\u0431\\u0435\\u0437 \\u043D\\u0435\\u0433\\u043E)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"search-form\",\n            onSubmit: e => {\n              e.preventDefault();\n              searchUsers();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-input-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faSearch,\n                className: \"search-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"search-input\",\n                placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F \\u0438\\u043B\\u0438 @\\u043B\\u043E\\u0433\\u0438\\u043D \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F...\",\n                value: searchQuery,\n                onChange: e => setSearchQuery(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"search-btn\",\n              disabled: searchLoading || !searchQuery.trim(),\n              children: searchLoading ? 'Поиск...' : 'Найти'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 15\n          }, this), searchLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-spinner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this) : searchResults.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-results\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B \\u043F\\u043E\\u0438\\u0441\\u043A\\u0430 (\", searchResults.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"users-grid\",\n              children: searchResults.map(renderUserCard)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }, this), activeTab === 'notifications' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notifications-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u0423\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u0412\\u0430\\u0448\\u0438 \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0435 \\u0443\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F \\u0438 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\\u0441\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 15\n          }, this), notificationsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-spinner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0443\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u0439...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 17\n          }, this) : notifications.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notifications-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notifications-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"\\u0423\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F (\", notifications.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"notifications-actions\",\n                children: unreadNotificationsCount > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"mark-all-read-btn\",\n                  onClick: markAllNotificationsAsRead,\n                  children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faCheck\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 537,\n                    columnNumber: 27\n                  }, this), \"\\u041E\\u0442\\u043C\\u0435\\u0442\\u0438\\u0442\\u044C \\u0432\\u0441\\u0435 \\u043A\\u0430\\u043A \\u043F\\u0440\\u043E\\u0447\\u0438\\u0442\\u0430\\u043D\\u043D\\u044B\\u0435\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notifications-list\",\n              children: notifications.map(renderNotification)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-state\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u0423\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u0439 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u041A\\u043E\\u0433\\u0434\\u0430 \\u043A\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0434\\u043F\\u0438\\u0448\\u0435\\u0442\\u0441\\u044F \\u043D\\u0430 \\u0432\\u0430\\u0441 \\u0438\\u043B\\u0438 \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442 \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439, \\u0432\\u044B \\u0443\\u0432\\u0438\\u0434\\u0438\\u0442\\u0435 \\u0443\\u0432\\u0435\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F \\u0437\\u0434\\u0435\\u0441\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatModal, {\n      isOpen: modalOpen,\n      onClose: () => {\n        setModalOpen(false);\n        setSelectedUser(null);\n      },\n      userId: selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.id,\n      userName: selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 428,\n    columnNumber: 5\n  }, this);\n};\n\n// Мемоизируем компонент для предотвращения ненужных ререндеров\n_s(FriendsPage, \"Xiql5Dft7tedtcth6dVTOUbOMKc=\", false, function () {\n  return [useNavigate];\n});\n_c = FriendsPage;\nexport default _c2 = /*#__PURE__*/memo(FriendsPage);\nvar _c, _c2;\n$RefreshReg$(_c, \"FriendsPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","memo","useNavigate","FontAwesomeIcon","faArrowLeft","faMapMarkerAlt","faCalendar","faUserPlus","faUserMinus","faSearch","faUsers","faUserFriends","faBell","faCheck","faTimes","faMessage","faHeart","faComment","ChatModal","makeAuthenticatedRequest","jsxDEV","_jsxDEV","FriendsPage","_s","navigate","searchQuery","setSearchQuery","searchResults","setSearchResults","searchLoading","setSearchLoading","activeTab","setActiveTab","notifications","setNotifications","notificationsLoading","setNotificationsLoading","modalOpen","setModalOpen","selectedUser","setSelectedUser","isLoggedIn","localStorage","getItem","sessionStorage","unreadNotificationsCount","filter","n","is_read","length","fetchNotifications","response","ok","data","json","console","error","markNotificationAsRead","notificationId","method","markAllNotificationsAsRead","searchUsers","trim","cleanQuery","replace","encodeURIComponent","log","users","status","handleFollow","userId","handleUnfollow","handleStartChat","userName","id","name","getAuthorInitials","authorName","_names$","_names$2","names","split","charAt","toUpperCase","formatDate","dateString","date","Date","now","diffInHours","Math","floor","diffInDays","toLocaleDateString","renderUserCard","user","className","onClick","window","location","href","targetUrl","title","children","e","stopPropagation","avatar","src","alt","first_name","username","fileName","_jsxFileName","lineNumber","columnNumber","icon","city","date_joined","last_name","is_following","renderNotification","notification","_notification$sender2","_notification$sender3","_notification$sender4","_notification$sender","sender","notification_type","message","post_info","slug","category","_notification$sender5","_notification$sender6","_notification$sender7","_notification$sender8","created_at","intervalId","setInterval","clearInterval","onSubmit","preventDefault","type","placeholder","value","onChange","target","disabled","map","isOpen","onClose","_c","_c2","$RefreshReg$"],"sources":["C:/Users/Wlad/OneDrive/Desktop/kwork_site/src/components/FriendsPage/FriendsPage.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback, memo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { \n  faArrowLeft, \n  faMapMarkerAlt,\n  faCalendar,\n  faUserPlus,\n  faUserMinus,\n  faSearch,\n  faUsers,\n  faUserFriends,\n  faBell,\n  faCheck,\n  faTimes,\n  faMessage,\n  faHeart,\n  faComment\n} from '@fortawesome/free-solid-svg-icons';\nimport ChatModal from '../ChatModal/ChatModal';\nimport { makeAuthenticatedRequest } from '../../utils/auth';\nimport './FriendsPage.css';\n\nconst FriendsPage = () => {\n  const navigate = useNavigate();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('search');\n  const [notifications, setNotifications] = useState([]);\n  const [notificationsLoading, setNotificationsLoading] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n\n  const isLoggedIn = () => {\n    return !!(localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken'));\n  };\n\n  // Мемоизируем количество непрочитанных уведомлений\n  const unreadNotificationsCount = useMemo(() => {\n    return notifications.filter(n => !n.is_read).length;\n  }, [notifications]);\n\n\n  // Загрузка уведомлений\n  const fetchNotifications = useCallback(async () => {\n    setNotificationsLoading(true);\n    try {\n      const response = await makeAuthenticatedRequest('http://localhost:8000/api/users/notifications/');\n      \n      if (response.ok) {\n        const data = await response.json();\n        setNotifications(data.notifications || []);\n      } else {\n        console.error('Ошибка загрузки уведомлений');\n        setNotifications([]);\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки уведомлений:', error);\n      setNotifications([]);\n    } finally {\n      setNotificationsLoading(false);\n    }\n  }, []);\n\n  // Отметить уведомление как прочитанное\n  const markNotificationAsRead = useCallback(async (notificationId) => {\n    try {\n      const response = await makeAuthenticatedRequest(\n        `http://localhost:8000/api/users/notifications/${notificationId}/read/`,\n        { method: 'POST' }\n      );\n      \n      if (response.ok) {\n        // Обновляем список уведомлений\n        fetchNotifications();\n      }\n    } catch (error) {\n      console.error('Ошибка отметки уведомления:', error);\n    }\n  }, [fetchNotifications]);\n\n  // Отметить все уведомления как прочитанные\n  const markAllNotificationsAsRead = useCallback(async () => {\n    try {\n      const response = await makeAuthenticatedRequest(\n        'http://localhost:8000/api/users/notifications/mark-all-read/',\n        { method: 'POST' }\n      );\n      \n      if (response.ok) {\n        // Обновляем список уведомлений\n        fetchNotifications();\n      }\n    } catch (error) {\n      console.error('Ошибка отметки всех уведомлений:', error);\n    }\n  }, [fetchNotifications]);\n\n  const searchUsers = async () => {\n    if (!searchQuery.trim()) return;\n    \n    setSearchLoading(true);\n    try {\n      // Убираем символ @ если пользователь его ввел\n      const cleanQuery = searchQuery.replace('@', '');\n      const response = await makeAuthenticatedRequest(\n        `http://localhost:8000/api/users/search/?q=${encodeURIComponent(cleanQuery)}`\n      );\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('Результаты поиска пользователей:', data);\n        console.log('Пользователи из API:', data.users);\n        setSearchResults(data.users || []);\n      } else {\n        console.error('Ошибка поиска пользователей:', response.status);\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error('Ошибка поиска:', error);\n      setSearchResults([]);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n\n  const handleFollow = async (userId) => {\n    try {\n      const response = await makeAuthenticatedRequest(\n        `http://localhost:8000/api/users/follow/${userId}/`,\n        { method: 'POST' }\n      );\n      \n      if (response.ok) {\n        // Обновляем поиск\n        searchUsers();\n      }\n    } catch (error) {\n      console.error('Ошибка подписки:', error);\n    }\n  };\n\n\n  const handleUnfollow = async (userId) => {\n    try {\n      const response = await makeAuthenticatedRequest(\n        `http://localhost:8000/api/users/unfollow/${userId}/`,\n        { method: 'POST' }\n      );\n      \n      if (response.ok) {\n        // Обновляем поиск\n        searchUsers();\n      }\n    } catch (error) {\n      console.error('Ошибка отписки:', error);\n    }\n  };\n\n  const handleStartChat = async (userId, userName) => {\n    // Открываем модальное окно чата\n    setSelectedUser({\n      id: userId,\n      name: userName\n    });\n    setModalOpen(true);\n  };\n\n  const getAuthorInitials = (authorName) => {\n    if (!authorName) return 'А';\n    const names = authorName.split(' ');\n    return `${names[0]?.charAt(0) || 'А'}${names[1]?.charAt(0) || ''}`.toUpperCase();\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Недавно';\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));\n    \n    if (diffInHours < 1) return 'Только что';\n    if (diffInHours < 24) return `${diffInHours} ч назад`;\n    \n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays < 7) return `${diffInDays} дн назад`;\n    \n    return date.toLocaleDateString('ru-RU');\n  };\n\n  const renderUserCard = (user) => {\n    console.log('Рендерим карточку пользователя:', user);\n    return (\n      <div \n        key={user.id} \n        className=\"user-card clickable\"\n        onClick={() => {\n          console.log('Клик по карточке пользователя:', user);\n          console.log('Текущий URL:', window.location.href);\n          if (user.id) {\n            console.log('Переходим на профиль пользователя ID:', user.id);\n            const targetUrl = `/user/${user.id}`;\n            console.log('Целевой URL:', targetUrl);\n            navigate(targetUrl);\n          } else {\n            console.error('ID пользователя не найден:', user);\n          }\n        }}\n        title=\"Перейти к профилю\"\n      >\n      <div className=\"user-header\">\n        <div \n          className=\"user-avatar\"\n          onClick={(e) => {\n            e.stopPropagation(); // Предотвращаем всплытие события\n            console.log('Клик по аватару пользователя:', user);\n            if (user.id) {\n              console.log('Переходим на профиль пользователя ID:', user.id);\n              navigate(`/user/${user.id}`);\n            } else {\n              console.error('ID пользователя не найден:', user);\n            }\n          }}\n          title=\"Перейти к профилю\"\n        >\n          {user.avatar ? (\n            <img src={user.avatar} alt={user.first_name || user.username} />\n          ) : (\n            <div className=\"avatar-placeholder\">\n              {getAuthorInitials(user.first_name || user.username)}\n            </div>\n          )}\n        </div>\n        <div className=\"user-info\">\n          <h3 \n            className=\"user-name\"\n            onClick={(e) => {\n              e.stopPropagation(); // Предотвращаем всплытие события\n              console.log('Клик по имени пользователя:', user);\n              if (user.id) {\n                console.log('Переходим на профиль пользователя ID:', user.id);\n                navigate(`/user/${user.id}`);\n              } else {\n                console.error('ID пользователя не найден:', user);\n              }\n            }}\n            title=\"Перейти к профилю\"\n          >\n            {user.first_name || user.username}\n          </h3>\n          <div className=\"user-login\">@{user.username}</div>\n          <div className=\"user-details\">\n            <span className=\"user-location\">\n              <FontAwesomeIcon icon={faMapMarkerAlt} />\n              {user.city || 'Не указан'}\n            </span>\n            <span className=\"user-join-date\">\n              <FontAwesomeIcon icon={faCalendar} />\n              {formatDate(user.date_joined)}\n            </span>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"user-actions\">\n        <button\n          className=\"chat-btn\"\n          onClick={(e) => {\n            e.stopPropagation();\n            const userName = `${user.first_name} ${user.last_name}`.trim() || user.username || 'Пользователь';\n            handleStartChat(user.id, userName);\n          }}\n          title=\"Написать сообщение\"\n        >\n          <FontAwesomeIcon icon={faMessage} />\n          Написать\n        </button>\n        {user.is_following ? (\n          <button \n            className=\"unfollow-btn\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleUnfollow(user.id);\n            }}\n          >\n            <FontAwesomeIcon icon={faUserMinus} />\n            Отписаться\n          </button>\n        ) : (\n          <button \n            className=\"follow-btn\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleFollow(user.id);\n            }}\n          >\n            <FontAwesomeIcon icon={faUserPlus} />\n            Подписаться\n          </button>\n        )}\n      </div>\n    </div>\n    );\n  };\n\n  const renderNotification = (notification) => (\n    <div key={notification.id} className={`notification-card ${!notification.is_read ? 'unread' : ''}`}>\n      <div className=\"notification-header\">\n        <div \n          className=\"notification-avatar clickable\"\n          onClick={() => {\n            if (notification.sender?.id) {\n              navigate(`/user/${notification.sender.id}`);\n            } else {\n              console.error('ID отправителя уведомления не найден:', notification);\n            }\n          }}\n          title=\"Перейти к профилю\"\n        >\n          {notification.sender?.avatar ? (\n            <img src={notification.sender.avatar} alt={notification.sender.first_name || notification.sender.username} />\n          ) : (\n            <div className=\"avatar-placeholder\">\n              {getAuthorInitials(notification.sender?.first_name || notification.sender?.username)}\n            </div>\n          )}\n        </div>\n        <div className=\"notification-info\">\n          <div className=\"notification-message\">\n            <div className=\"notification-content\">\n              {notification.notification_type === 'message' && (\n                <FontAwesomeIcon icon={faMessage} className=\"notification-icon message-icon\" />\n              )}\n              {notification.notification_type === 'follow' && (\n                <FontAwesomeIcon icon={faUserPlus} className=\"notification-icon follow-icon\" />\n              )}\n              {notification.notification_type === 'like' && (\n                <FontAwesomeIcon icon={faHeart} className=\"notification-icon like-icon\" />\n              )}\n              {notification.notification_type === 'comment' && (\n                <FontAwesomeIcon icon={faComment} className=\"notification-icon comment-icon\" />\n              )}\n              <span className=\"notification-text\">{notification.message}</span>\n            </div>\n            {notification.post_info && (\n              <div \n                className=\"notification-post-link clickable\"\n                onClick={() => navigate(`/post/${notification.post_info.slug}`)}\n                title=\"Перейти к посту\"\n              >\n                <span className=\"post-title\">\"{notification.post_info.title}\"</span>\n                {notification.post_info.category && (\n                  <span className=\"post-category\"> в категории {notification.post_info.category}</span>\n                )}\n              </div>\n            )}\n            {notification.notification_type === 'message' && (\n              <button \n                className=\"open-chat-btn\"\n                onClick={() => {\n                  const userName = `${notification.sender?.first_name} ${notification.sender?.last_name}`.trim() || notification.sender?.username || 'Пользователь';\n                  handleStartChat(notification.sender?.id, userName);\n                }}\n                title=\"Открыть чат\"\n              >\n                <FontAwesomeIcon icon={faMessage} />\n                Открыть чат\n              </button>\n            )}\n          </div>\n          <div className=\"notification-time\">{formatDate(notification.created_at)}</div>\n        </div>\n        {!notification.is_read && (\n          <button \n            className=\"mark-read-btn\"\n            onClick={() => markNotificationAsRead(notification.id)}\n            title=\"Отметить как прочитанное\"\n          >\n            <FontAwesomeIcon icon={faCheck} />\n          </button>\n        )}\n      </div>\n    </div>\n  );\n\n  // Загружаем уведомления при переключении на вкладку\n  useEffect(() => {\n    if (activeTab === 'notifications') {\n      fetchNotifications();\n    }\n  }, [activeTab, fetchNotifications]);\n\n  // Автоматическое обновление уведомлений каждые 30 секунд\n  useEffect(() => {\n    let intervalId;\n    \n    if (activeTab === 'notifications') {\n      intervalId = setInterval(() => {\n        fetchNotifications();\n      }, 30000); // 30 секунд\n    }\n\n    // Cleanup функция для очистки интервала\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [activeTab, fetchNotifications]);\n\n  if (!isLoggedIn()) {\n    return (\n      <div className=\"friends-page\">\n        <div className=\"friends-container\">\n          <div className=\"auth-required\">\n            <h2>Требуется авторизация</h2>\n            <p>Для просмотра друзей и уведомлений необходимо войти в систему</p>\n            <button className=\"auth-btn\" onClick={() => navigate('/auth')}>\n              Войти в систему\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"friends-page\">\n      <div className=\"friends-container\">\n        <div className=\"friends-header\">\n          <button onClick={() => navigate('/')} className=\"btn-back\">\n            <FontAwesomeIcon icon={faArrowLeft} />\n            Назад\n          </button>\n          <h1 className=\"friends-title\">\n            <FontAwesomeIcon icon={faUserFriends} />\n            Друзья\n            {unreadNotificationsCount > 0 && (\n              <span className=\"header-notification-badge\">\n                {unreadNotificationsCount}\n              </span>\n            )}\n          </h1>\n        </div>\n\n        <div className=\"friends-content\">\n          {/* Вкладки */}\n          <div className=\"friends-tabs\">\n            <button \n              className={`tab ${activeTab === 'search' ? 'active' : ''}`}\n              onClick={() => setActiveTab('search')}\n            >\n              <FontAwesomeIcon icon={faSearch} />\n              Поиск пользователей\n            </button>\n            <button \n              className={`tab ${activeTab === 'notifications' ? 'active' : ''}`}\n              onClick={() => setActiveTab('notifications')}\n            >\n              <FontAwesomeIcon icon={faBell} />\n              Уведомления\n              {unreadNotificationsCount > 0 && (\n                <span className=\"notification-badge\">\n                  {unreadNotificationsCount}\n                </span>\n              )}\n            </button>\n          </div>\n\n          {/* Секция поиска */}\n          {activeTab === 'search' && (\n            <div className=\"search-section\">\n              <div className=\"search-header\">\n                <h2>Найти пользователей</h2>\n                <p>Ищите по имени или логину (с символом @ или без него)</p>\n              </div>\n              \n              <form className=\"search-form\" onSubmit={(e) => { e.preventDefault(); searchUsers(); }}>\n                <div className=\"search-input-wrapper\">\n                  <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\n                  <input\n                    type=\"text\"\n                    className=\"search-input\"\n                    placeholder=\"Введите имя или @логин пользователя...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                  />\n                </div>\n                <button \n                  type=\"submit\" \n                  className=\"search-btn\"\n                  disabled={searchLoading || !searchQuery.trim()}\n                >\n                  {searchLoading ? 'Поиск...' : 'Найти'}\n                </button>\n              </form>\n\n              {searchLoading ? (\n                <div className=\"loading\">\n                  <div className=\"loading-spinner\"></div>\n                  <p>Поиск пользователей...</p>\n                </div>\n              ) : searchResults.length > 0 ? (\n                <div className=\"search-results\">\n                  <h3>Результаты поиска ({searchResults.length})</h3>\n                  <div className=\"users-grid\">\n                    {searchResults.map(renderUserCard)}\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          )}\n\n          {/* Секция уведомлений */}\n          {activeTab === 'notifications' && (\n            <div className=\"notifications-section\">\n              <div className=\"section-header\">\n                <h2>Уведомления</h2>\n                <p>Ваши последние уведомления и активности</p>\n              </div>\n              \n              {notificationsLoading ? (\n                <div className=\"loading\">\n                  <div className=\"loading-spinner\"></div>\n                  <p>Загрузка уведомлений...</p>\n                </div>\n              ) : notifications.length > 0 ? (\n                <div className=\"notifications-content\">\n                  <div className=\"notifications-header\">\n                    <h3>Уведомления ({notifications.length})</h3>\n                    <div className=\"notifications-actions\">\n                      {unreadNotificationsCount > 0 && (\n                        <button \n                          className=\"mark-all-read-btn\"\n                          onClick={markAllNotificationsAsRead}\n                        >\n                          <FontAwesomeIcon icon={faCheck} />\n                          Отметить все как прочитанные\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"notifications-list\">\n                    {notifications.map(renderNotification)}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"empty-state\">\n                  <h3>Уведомлений пока нет</h3>\n                  <p>Когда кто-то подпишется на вас или оставит комментарий, вы увидите уведомления здесь</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Модальное окно чата */}\n      <ChatModal\n        isOpen={modalOpen}\n        onClose={() => {\n          setModalOpen(false);\n          setSelectedUser(null);\n        }}\n        userId={selectedUser?.id}\n        userName={selectedUser?.name}\n      />\n    </div>\n  );\n};\n\n// Мемоизируем компонент для предотвращения ненужных ререндеров\nexport default memo(FriendsPage);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}