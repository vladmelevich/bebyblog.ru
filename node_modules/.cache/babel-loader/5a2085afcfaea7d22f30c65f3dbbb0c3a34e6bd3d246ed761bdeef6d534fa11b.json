{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wlad\\\\OneDrive\\\\Desktop\\\\kwork_site\\\\src\\\\components\\\\FriendsPage\\\\FriendsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './FriendsPage.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch, faUserPlus, faUsers, faUserFriends, faArrowLeft, faMapMarkerAlt, faCalendar } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FriendsPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('search');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [followers, setFollowers] = useState([]);\n  const [following, setFollowing] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [searchLoading, setSearchLoading] = useState(false);\n  useEffect(() => {\n    if (activeTab === 'followers') {\n      loadFollowers();\n    } else if (activeTab === 'following') {\n      loadFollowing();\n    }\n  }, [activeTab]);\n  const isLoggedIn = () => {\n    return !!(localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken'));\n  };\n  const getAuthHeaders = () => {\n    const token = localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken');\n    return token ? {\n      'Authorization': `Bearer ${token}`\n    } : {};\n  };\n  const searchUsers = async () => {\n    if (!searchQuery.trim()) {\n      setSearchResults([]);\n      return;\n    }\n    setSearchLoading(true);\n    try {\n      const response = await fetch(`http://localhost:8000/api/users/search/?q=${encodeURIComponent(searchQuery)}`, {\n        headers: {\n          'Content-Type': 'application/json',\n          ...getAuthHeaders()\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSearchResults(data.users || []);\n      } else {\n        console.error('Ошибка поиска пользователей:', response.status);\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error('Ошибка поиска:', error);\n      setSearchResults([]);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n  const loadFollowers = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:8000/api/users/followers/', {\n        headers: {\n          'Content-Type': 'application/json',\n          ...getAuthHeaders()\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setFollowers(data.followers || []);\n      } else {\n        console.error('Ошибка загрузки подписчиков:', response.status);\n        setFollowers([]);\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки подписчиков:', error);\n      setFollowers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadFollowing = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:8000/api/users/following/', {\n        headers: {\n          'Content-Type': 'application/json',\n          ...getAuthHeaders()\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setFollowing(data.following || []);\n      } else {\n        console.error('Ошибка загрузки подписок:', response.status);\n        setFollowing([]);\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки подписок:', error);\n      setFollowing([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFollow = async userId => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/users/follow/${userId}/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...getAuthHeaders()\n        }\n      });\n      if (response.ok) {\n        // Обновляем списки\n        if (activeTab === 'search') {\n          searchUsers();\n        } else if (activeTab === 'followers') {\n          loadFollowers();\n        } else if (activeTab === 'following') {\n          loadFollowing();\n        }\n      } else {\n        console.error('Ошибка подписки:', response.status);\n      }\n    } catch (error) {\n      console.error('Ошибка подписки:', error);\n    }\n  };\n  const handleUnfollow = async userId => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/users/unfollow/${userId}/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...getAuthHeaders()\n        }\n      });\n      if (response.ok) {\n        // Обновляем списки\n        if (activeTab === 'search') {\n          searchUsers();\n        } else if (activeTab === 'followers') {\n          loadFollowers();\n        } else if (activeTab === 'following') {\n          loadFollowing();\n        }\n      } else {\n        console.error('Ошибка отписки:', response.status);\n      }\n    } catch (error) {\n      console.error('Ошибка отписки:', error);\n    }\n  };\n  const getAuthorInitials = authorName => {\n    var _names$, _names$2;\n    if (!authorName) return 'А';\n    const names = authorName.split(' ');\n    return `${((_names$ = names[0]) === null || _names$ === void 0 ? void 0 : _names$.charAt(0)) || 'А'}${((_names$2 = names[1]) === null || _names$2 === void 0 ? void 0 : _names$2.charAt(0)) || ''}`.toUpperCase();\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'Недавно';\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));\n    if (diffInHours < 1) return 'Только что';\n    if (diffInHours < 24) return `${diffInHours} ч назад`;\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays < 7) return `${diffInDays} дн назад`;\n    return date.toLocaleDateString('ru-RU');\n  };\n  const renderUserCard = (user, showFollowButton = true) => {\n    const isFollowing = following.some(followingUser => followingUser.id === user.id);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-avatar\",\n        onClick: () => navigate(`/user/${user.id}`),\n        children: [user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.avatar,\n          alt: user.first_name || user.username,\n          onError: e => {\n            e.target.style.display = 'none';\n            e.target.nextSibling.style.display = 'flex';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avatar-placeholder\",\n          style: {\n            display: user.avatar ? 'none' : 'flex'\n          },\n          children: getAuthorInitials(user.first_name || user.username)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        onClick: () => navigate(`/user/${user.id}`),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-name\",\n          children: user.first_name || user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-username\",\n          children: [\"@\", user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-details\",\n          children: [user.city && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-location\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faMapMarkerAlt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), user.city]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-joined\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCalendar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), formatDate(user.date_joined)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), showFollowButton && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-actions\",\n        children: isFollowing ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"follow-btn following\",\n          onClick: () => handleUnfollow(user.id),\n          children: \"\\u041E\\u0442\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"follow-btn\",\n          onClick: () => handleFollow(user.id),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faUserPlus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this), \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this)]\n    }, user.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  };\n  const renderSearchTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-tab\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-input-container\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faSearch,\n          className: \"search-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439 \\u043F\\u043E \\u0438\\u043C\\u0435\\u043D\\u0438 \\u0438\\u043B\\u0438 username...\",\n          value: searchQuery,\n          onChange: e => setSearchQuery(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && searchUsers(),\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: searchUsers,\n          disabled: searchLoading,\n          className: \"search-btn\",\n          children: searchLoading ? 'Поиск...' : 'Найти'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-results\",\n      children: searchResults.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users-list\",\n        children: searchResults.map(user => renderUserCard(user))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this) : searchQuery && !searchLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-results\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n  const renderFollowersTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"followers-tab\",\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0447\\u0438\\u043A\\u043E\\u0432...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }, this) : followers.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users-list\",\n      children: followers.map(user => renderUserCard(user, false))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-followers\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0447\\u0438\\u043A\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 5\n  }, this);\n  const renderFollowingTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"following-tab\",\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043E\\u043A...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }, this) : following.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users-list\",\n      children: following.map(user => renderUserCard(user))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-following\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0412\\u044B \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0438 \\u043D\\u0430 \\u043A\\u043E\\u0433\\u043E \\u043D\\u0435 \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0430\\u043D\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 315,\n    columnNumber: 5\n  }, this);\n  if (!isLoggedIn()) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"friends-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-required\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0414\\u043B\\u044F \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u0434\\u0440\\u0443\\u0437\\u0435\\u0439 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0432\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/auth'),\n            className: \"auth-btn\",\n            children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"friends-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"friends-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"btn-back\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faArrowLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), \"\\u041D\\u0430\\u0437\\u0430\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0414\\u0440\\u0443\\u0437\\u044C\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${activeTab === 'search' ? 'active' : ''}`,\n          onClick: () => setActiveTab('search'),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), \"\\u041F\\u043E\\u0438\\u0441\\u043A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${activeTab === 'followers' ? 'active' : ''}`,\n          onClick: () => setActiveTab('followers'),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faUsers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u0447\\u0438\\u043A\\u0438 (\", followers.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab ${activeTab === 'following' ? 'active' : ''}`,\n          onClick: () => setActiveTab('following'),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faUserFriends\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), \"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u043A\\u0438 (\", following.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"friends-content\",\n        children: [activeTab === 'search' && renderSearchTab(), activeTab === 'followers' && renderFollowersTab(), activeTab === 'following' && renderFollowingTab()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 347,\n    columnNumber: 5\n  }, this);\n};\n_s(FriendsPage, \"5PBb9tJXj6qd8LgM6D9/iNULJ+o=\", false, function () {\n  return [useNavigate];\n});\n_c = FriendsPage;\nexport default FriendsPage;\nvar _c;\n$RefreshReg$(_c, \"FriendsPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","FontAwesomeIcon","faSearch","faUserPlus","faUsers","faUserFriends","faArrowLeft","faMapMarkerAlt","faCalendar","jsxDEV","_jsxDEV","FriendsPage","_s","navigate","activeTab","setActiveTab","searchQuery","setSearchQuery","searchResults","setSearchResults","followers","setFollowers","following","setFollowing","loading","setLoading","searchLoading","setSearchLoading","loadFollowers","loadFollowing","isLoggedIn","localStorage","getItem","sessionStorage","getAuthHeaders","token","searchUsers","trim","response","fetch","encodeURIComponent","headers","ok","data","json","users","console","error","status","handleFollow","userId","method","handleUnfollow","getAuthorInitials","authorName","_names$","_names$2","names","split","charAt","toUpperCase","formatDate","dateString","date","Date","now","diffInHours","Math","floor","diffInDays","toLocaleDateString","renderUserCard","user","showFollowButton","isFollowing","some","followingUser","id","className","children","onClick","avatar","src","alt","first_name","username","onError","e","target","style","display","nextSibling","fileName","_jsxFileName","lineNumber","columnNumber","city","icon","date_joined","renderSearchTab","type","placeholder","value","onChange","onKeyPress","key","disabled","length","map","renderFollowersTab","renderFollowingTab","_c","$RefreshReg$"],"sources":["C:/Users/Wlad/OneDrive/Desktop/kwork_site/src/components/FriendsPage/FriendsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './FriendsPage.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { \r\n  faSearch, \r\n  faUserPlus, \r\n  faUsers, \r\n  faUserFriends,\r\n  faArrowLeft,\r\n  faMapMarkerAlt,\r\n  faCalendar\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst FriendsPage = () => {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('search');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [followers, setFollowers] = useState([]);\r\n  const [following, setFollowing] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'followers') {\r\n      loadFollowers();\r\n    } else if (activeTab === 'following') {\r\n      loadFollowing();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const isLoggedIn = () => {\r\n    return !!(localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken'));\r\n  };\r\n\r\n  const getAuthHeaders = () => {\r\n    const token = localStorage.getItem('accessToken') || sessionStorage.getItem('accessToken');\r\n    return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n  };\r\n\r\n  const searchUsers = async () => {\r\n    if (!searchQuery.trim()) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    setSearchLoading(true);\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/users/search/?q=${encodeURIComponent(searchQuery)}`, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...getAuthHeaders()\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSearchResults(data.users || []);\r\n      } else {\r\n        console.error('Ошибка поиска пользователей:', response.status);\r\n        setSearchResults([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка поиска:', error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadFollowers = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/users/followers/', {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...getAuthHeaders()\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setFollowers(data.followers || []);\r\n      } else {\r\n        console.error('Ошибка загрузки подписчиков:', response.status);\r\n        setFollowers([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка загрузки подписчиков:', error);\r\n      setFollowers([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadFollowing = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/users/following/', {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...getAuthHeaders()\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setFollowing(data.following || []);\r\n      } else {\r\n        console.error('Ошибка загрузки подписок:', response.status);\r\n        setFollowing([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка загрузки подписок:', error);\r\n      setFollowing([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFollow = async (userId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/users/follow/${userId}/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...getAuthHeaders()\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Обновляем списки\r\n        if (activeTab === 'search') {\r\n          searchUsers();\r\n        } else if (activeTab === 'followers') {\r\n          loadFollowers();\r\n        } else if (activeTab === 'following') {\r\n          loadFollowing();\r\n        }\r\n      } else {\r\n        console.error('Ошибка подписки:', response.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка подписки:', error);\r\n    }\r\n  };\r\n\r\n  const handleUnfollow = async (userId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/users/unfollow/${userId}/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...getAuthHeaders()\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Обновляем списки\r\n        if (activeTab === 'search') {\r\n          searchUsers();\r\n        } else if (activeTab === 'followers') {\r\n          loadFollowers();\r\n        } else if (activeTab === 'following') {\r\n          loadFollowing();\r\n        }\r\n      } else {\r\n        console.error('Ошибка отписки:', response.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка отписки:', error);\r\n    }\r\n  };\r\n\r\n  const getAuthorInitials = (authorName) => {\r\n    if (!authorName) return 'А';\r\n    const names = authorName.split(' ');\r\n    return `${names[0]?.charAt(0) || 'А'}${names[1]?.charAt(0) || ''}`.toUpperCase();\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'Недавно';\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));\r\n    \r\n    if (diffInHours < 1) return 'Только что';\r\n    if (diffInHours < 24) return `${diffInHours} ч назад`;\r\n    \r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    if (diffInDays < 7) return `${diffInDays} дн назад`;\r\n    \r\n    return date.toLocaleDateString('ru-RU');\r\n  };\r\n\r\n  const renderUserCard = (user, showFollowButton = true) => {\r\n    const isFollowing = following.some(followingUser => followingUser.id === user.id);\r\n    \r\n    return (\r\n      <div key={user.id} className=\"user-card\">\r\n        <div className=\"user-avatar\" onClick={() => navigate(`/user/${user.id}`)}>\r\n          {user.avatar ? (\r\n            <img \r\n              src={user.avatar} \r\n              alt={user.first_name || user.username}\r\n              onError={(e) => {\r\n                e.target.style.display = 'none';\r\n                e.target.nextSibling.style.display = 'flex';\r\n              }}\r\n            />\r\n          ) : null}\r\n          <div className=\"avatar-placeholder\" style={{ \r\n            display: user.avatar ? 'none' : 'flex' \r\n          }}>\r\n            {getAuthorInitials(user.first_name || user.username)}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"user-info\" onClick={() => navigate(`/user/${user.id}`)}>\r\n          <div className=\"user-name\">{user.first_name || user.username}</div>\r\n          <div className=\"user-username\">@{user.username}</div>\r\n          <div className=\"user-details\">\r\n            {user.city && (\r\n              <span className=\"user-location\">\r\n                <FontAwesomeIcon icon={faMapMarkerAlt} />\r\n                {user.city}\r\n              </span>\r\n            )}\r\n            <span className=\"user-joined\">\r\n              <FontAwesomeIcon icon={faCalendar} />\r\n              {formatDate(user.date_joined)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        {showFollowButton && (\r\n          <div className=\"user-actions\">\r\n            {isFollowing ? (\r\n              <button \r\n                className=\"follow-btn following\"\r\n                onClick={() => handleUnfollow(user.id)}\r\n              >\r\n                Отписаться\r\n              </button>\r\n            ) : (\r\n              <button \r\n                className=\"follow-btn\"\r\n                onClick={() => handleFollow(user.id)}\r\n              >\r\n                <FontAwesomeIcon icon={faUserPlus} />\r\n                Подписаться\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSearchTab = () => (\r\n    <div className=\"search-tab\">\r\n      <div className=\"search-section\">\r\n        <div className=\"search-input-container\">\r\n          <FontAwesomeIcon icon={faSearch} className=\"search-icon\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Поиск пользователей по имени или username...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && searchUsers()}\r\n            className=\"search-input\"\r\n          />\r\n          <button \r\n            onClick={searchUsers}\r\n            disabled={searchLoading}\r\n            className=\"search-btn\"\r\n          >\r\n            {searchLoading ? 'Поиск...' : 'Найти'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"search-results\">\r\n        {searchResults.length > 0 ? (\r\n          <div className=\"users-list\">\r\n            {searchResults.map(user => renderUserCard(user))}\r\n          </div>\r\n        ) : searchQuery && !searchLoading ? (\r\n          <div className=\"no-results\">\r\n            <p>Пользователи не найдены</p>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderFollowersTab = () => (\r\n    <div className=\"followers-tab\">\r\n      {loading ? (\r\n        <div className=\"loading\">Загрузка подписчиков...</div>\r\n      ) : followers.length > 0 ? (\r\n        <div className=\"users-list\">\r\n          {followers.map(user => renderUserCard(user, false))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"no-followers\">\r\n          <p>У вас пока нет подписчиков</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderFollowingTab = () => (\r\n    <div className=\"following-tab\">\r\n      {loading ? (\r\n        <div className=\"loading\">Загрузка подписок...</div>\r\n      ) : following.length > 0 ? (\r\n        <div className=\"users-list\">\r\n          {following.map(user => renderUserCard(user))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"no-following\">\r\n          <p>Вы пока ни на кого не подписаны</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  if (!isLoggedIn()) {\r\n    return (\r\n      <div className=\"friends-page\">\r\n        <div className=\"friends-container\">\r\n          <div className=\"auth-required\">\r\n            <h2>Требуется авторизация</h2>\r\n            <p>Для просмотра друзей необходимо войти в систему</p>\r\n            <button onClick={() => navigate('/auth')} className=\"auth-btn\">\r\n              Войти\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"friends-page\">\r\n      <div className=\"friends-container\">\r\n        {/* Заголовок */}\r\n        <div className=\"friends-header\">\r\n          <button onClick={() => navigate('/')} className=\"btn-back\">\r\n            <FontAwesomeIcon icon={faArrowLeft} />\r\n            Назад\r\n          </button>\r\n          <h1>Друзья</h1>\r\n        </div>\r\n\r\n        {/* Табы */}\r\n        <div className=\"friends-tabs\">\r\n          <button \r\n            className={`tab ${activeTab === 'search' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('search')}\r\n          >\r\n            <FontAwesomeIcon icon={faSearch} />\r\n            Поиск\r\n          </button>\r\n          <button \r\n            className={`tab ${activeTab === 'followers' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('followers')}\r\n          >\r\n            <FontAwesomeIcon icon={faUsers} />\r\n            Подписчики ({followers.length})\r\n          </button>\r\n          <button \r\n            className={`tab ${activeTab === 'following' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('following')}\r\n          >\r\n            <FontAwesomeIcon icon={faUserFriends} />\r\n            Подписки ({following.length})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Контент */}\r\n        <div className=\"friends-content\">\r\n          {activeTab === 'search' && renderSearchTab()}\r\n          {activeTab === 'followers' && renderFollowersTab()}\r\n          {activeTab === 'following' && renderFollowingTab()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FriendsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}