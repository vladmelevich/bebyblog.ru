{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wlad\\\\OneDrive\\\\Desktop\\\\kwork_site\\\\src\\\\components\\\\TelegramChat\\\\TelegramChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faPaperPlane, faEdit, faTrash, faCheck, faTimes, faUser, faMessage, faReply, faImage, faFile, faMicrophone, faPaperclip, faSmile, faEllipsisV, faPhone, faVideo, faSearch, faDownload, faShare, faCopy, faForward, faClock, faCheckDouble } from '@fortawesome/free-solid-svg-icons';\nimport { apiClient } from '../../utils/api';\nimport './TelegramChat.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TelegramChat = () => {\n  _s();\n  var _chat$other_participa3;\n  const {\n    chatId\n  } = useParams();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // Основные состояния\n  const [chat, setChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingTimeout, setTypingTimeout] = useState(null);\n\n  // Редактирование сообщений\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editText, setEditText] = useState('');\n\n  // Контекстное меню и модальные окна\n  const [contextMenu, setContextMenu] = useState(null);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [showAttachmentMenu, setShowAttachmentMenu] = useState(false);\n\n  // Файлы и медиа\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploadingFiles, setUploadingFiles] = useState(false);\n\n  // Ответы на сообщения\n  const [replyToMessage, setReplyToMessage] = useState(null);\n\n  // Пагинация\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMoreMessages, setHasMoreMessages] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n\n  // Загрузка чата при монтировании компонента\n  useEffect(() => {\n    if (chatId) {\n      loadChat();\n    }\n  }, [chatId]);\n\n  // Автоскролл к последнему сообщению\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Обработка клика вне контекстного меню\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (contextMenu && !event.target.closest('.context-menu')) {\n        setContextMenu(null);\n      }\n      if (showEmojiPicker && !event.target.closest('.emoji-picker')) {\n        setShowEmojiPicker(false);\n      }\n      if (showAttachmentMenu && !event.target.closest('.attachment-menu')) {\n        setShowAttachmentMenu(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [contextMenu, showEmojiPicker, showAttachmentMenu]);\n\n  // Функция скролла к низу\n  const scrollToBottom = () => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  };\n\n  // Загрузка чата\n  const loadChat = async () => {\n    try {\n      setIsLoading(true);\n      const response = await apiClient.request(`/users/chats/${chatId}/`);\n      if (response.success) {\n        setChat(response.chat);\n        setMessages(response.messages); // Сообщения уже в правильном порядке\n        setHasMoreMessages(response.pagination.has_next);\n      } else {\n        console.error('Ошибка загрузки чата:', response.message);\n        navigate('/chats');\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки чата:', error);\n      navigate('/chats');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Загрузка дополнительных сообщений\n  const loadMoreMessages = async () => {\n    if (loadingMore || !hasMoreMessages) return;\n    try {\n      setLoadingMore(true);\n      const nextPage = currentPage + 1;\n      const response = await apiClient.request(`/users/chats/${chatId}/?page=${nextPage}`);\n      if (response.success) {\n        const newMessages = response.messages;\n        setMessages(prev => [...newMessages, ...prev]);\n        setCurrentPage(nextPage);\n        setHasMoreMessages(response.pagination.has_next);\n      }\n    } catch (error) {\n      console.error('Ошибка загрузки дополнительных сообщений:', error);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  // Обработка отправки сообщения\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() && selectedFiles.length === 0) return;\n    const formData = new FormData();\n    formData.append('content', newMessage.trim());\n    if (replyToMessage) {\n      formData.append('reply_to', replyToMessage.id);\n    }\n\n    // Добавляем файлы\n    selectedFiles.forEach((file, index) => {\n      formData.append('file', file.file);\n    });\n    try {\n      const response = await apiClient.request(`/users/chats/${chatId}/messages/`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Authorization': `Bearer ${apiClient.token}`\n        }\n      });\n      if (response.success) {\n        setMessages(prev => [...prev, response.message]);\n        setNewMessage('');\n        setSelectedFiles([]);\n        setReplyToMessage(null);\n        setShowAttachmentMenu(false);\n\n        // Обновляем информацию о чате\n        if (chat) {\n          setChat(prev => ({\n            ...prev,\n            last_message: response.message,\n            updated_at: new Date().toISOString()\n          }));\n        }\n      }\n    } catch (error) {\n      console.error('Ошибка отправки сообщения:', error);\n    }\n  };\n\n  // Обработка нажатия Enter\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // Обработка изменения текста (индикатор набора)\n  const handleTextChange = e => {\n    setNewMessage(e.target.value);\n\n    // Автоматическое изменение высоты textarea\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';\n    }\n\n    // Показываем индикатор набора текста\n    if (!isTyping) {\n      setIsTyping(true);\n    }\n\n    // Сбрасываем таймер\n    if (typingTimeout) {\n      clearTimeout(typingTimeout);\n    }\n\n    // Скрываем индикатор через 2 секунды\n    const timeout = setTimeout(() => {\n      setIsTyping(false);\n    }, 2000);\n    setTypingTimeout(timeout);\n  };\n\n  // Обработка выбора файлов\n  const handleFileSelect = e => {\n    const files = Array.from(e.target.files);\n    const validFiles = files.filter(file => {\n      const maxSize = 10 * 1024 * 1024; // 10MB\n      if (file.size > maxSize) {\n        alert(`Файл ${file.name} слишком большой. Максимальный размер: 10MB`);\n        return false;\n      }\n      return true;\n    });\n    const fileObjects = validFiles.map(file => ({\n      id: Date.now() + Math.random(),\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      file: file\n    }));\n    setSelectedFiles(prev => [...prev, ...fileObjects]);\n    setShowAttachmentMenu(false);\n\n    // Очищаем input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Удаление выбранного файла\n  const removeFile = fileId => {\n    setSelectedFiles(prev => prev.filter(file => file.id !== fileId));\n  };\n\n  // Получение иконки для типа файла\n  const getFileIcon = fileType => {\n    if (fileType.startsWith('image/')) return faImage;\n    return faFile;\n  };\n\n  // Форматирование размера файла\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  // Обработка контекстного меню\n  const handleContextMenu = (e, message) => {\n    e.preventDefault();\n    setContextMenu({\n      x: e.clientX,\n      y: e.clientY,\n      message: message\n    });\n  };\n\n  // Начало редактирования сообщения\n  const startEditing = message => {\n    setEditingMessageId(message.id);\n    setEditText(message.content);\n    setContextMenu(null);\n  };\n\n  // Сохранение редактирования\n  const saveEdit = async () => {\n    if (!editText.trim()) return;\n    try {\n      const response = await apiClient.request(`/users/chats/${chatId}/messages/${editingMessageId}/`, {\n        method: 'PUT',\n        body: JSON.stringify({\n          content: editText.trim()\n        })\n      });\n      if (response.success) {\n        setMessages(prev => prev.map(m => m.id === editingMessageId ? response.message : m));\n        setEditingMessageId(null);\n        setEditText('');\n      }\n    } catch (error) {\n      console.error('Ошибка редактирования сообщения:', error);\n    }\n  };\n\n  // Отмена редактирования\n  const cancelEdit = () => {\n    setEditingMessageId(null);\n    setEditText('');\n  };\n\n  // Удаление сообщения\n  const handleDeleteMessage = async message => {\n    try {\n      const response = await apiClient.request(`/users/chats/${chatId}/messages/${message.id}/delete/`, {\n        method: 'DELETE'\n      });\n      if (response.success) {\n        setMessages(prev => prev.filter(m => m.id !== message.id));\n      }\n    } catch (error) {\n      console.error('Ошибка удаления сообщения:', error);\n    }\n    setContextMenu(null);\n  };\n\n  // Ответ на сообщение\n  const handleReply = message => {\n    setReplyToMessage(message);\n    setContextMenu(null);\n  };\n\n  // Удаление ответа\n  const removeReply = () => {\n    setReplyToMessage(null);\n  };\n\n  // Форматирование времени\n  const formatTime = timestamp => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString('ru-RU', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Форматирование даты\n  const formatDate = timestamp => {\n    const date = new Date(timestamp);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n    if (date.toDateString() === today.toDateString()) {\n      return 'Сегодня';\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return 'Вчера';\n    } else {\n      return date.toLocaleDateString('ru-RU', {\n        day: 'numeric',\n        month: 'long'\n      });\n    }\n  };\n\n  // Добавление эмодзи\n  const addEmoji = emoji => {\n    setNewMessage(prev => prev + emoji);\n    setShowEmojiPicker(false);\n  };\n\n  // Эмодзи для выбора\n  const emojis = ['😀', '😃', '😄', '😁', '😆', '😅', '😂', '🤣', '😊', '😇', '🙂', '🙃', '😉', '😌', '😍', '🥰', '😘', '😗', '😙', '😚', '😋', '😛', '😝', '😜', '🤪', '🤨', '🧐', '🤓', '😎', '🤩', '🥳', '😏', '😒', '😞', '😔', '😟', '😕', '🙁', '☹️', '😣', '😖', '😫', '😩', '🥺', '😢', '😭', '😤', '😠', '😡', '🤬', '🤯', '😳', '🥵', '🥶', '😱', '😨', '😰', '😥', '😓', '🤗', '🤔', '🤭', '🤫', '🤥', '😶', '😐', '😑', '😬', '🙄', '😯', '😦', '😧', '😮', '😲', '🥱', '😴', '🤤', '😪', '😵', '🤐', '🥴', '🤢', '🤮', '🤧', '😷', '🤒', '🤕', '🤑', '🤠', '😈', '👿', '👹', '👺', '🤡', '💩', '👻', '💀', '☠️', '👽', '👾', '🤖', '🎃', '😺', '😸', '😹', '😻', '😼', '😽', '🙀', '😿', '😾'];\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"telegram-chat\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0447\\u0430\\u0442\\u0430...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this);\n  }\n  if (!chat) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"telegram-chat\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-error\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faMessage,\n          className: \"error-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0427\\u0430\\u0442 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/chats'),\n          className: \"back-button\",\n          children: \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u0447\\u0430\\u0442\\u0430\\u043C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this);\n  }\n  const otherUser = chat.other_participant;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"telegram-chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => navigate('/chats'),\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faArrowLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-user-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-avatar\",\n            children: otherUser !== null && otherUser !== void 0 && otherUser.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: otherUser.avatar,\n              alt: otherUser.first_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatar-placeholder\",\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faUser\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"user-name\",\n              children: (otherUser === null || otherUser === void 0 ? void 0 : otherUser.first_name) || 'Пользователь'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"user-status\",\n              children: \"\\u0432 \\u0441\\u0435\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"header-button\",\n          title: \"\\u041F\\u043E\\u0438\\u0441\\u043A\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"header-button\",\n          title: \"\\u0417\\u0432\\u043E\\u043D\\u043E\\u043A\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPhone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"header-button\",\n          title: \"\\u0412\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"header-button\",\n          title: \"\\u041C\\u0435\\u043D\\u044E\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faEllipsisV\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      onScroll: e => {\n        if (e.target.scrollTop === 0 && hasMoreMessages && !loadingMore) {\n          loadMoreMessages();\n        }\n      },\n      children: [loadingMore && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-more\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 11\n      }, this), messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-chat\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faMessage,\n          className: \"empty-chat-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-chat-text\",\n          children: \"\\u041D\\u0430\\u0447\\u043D\\u0438\\u0442\\u0435 \\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-chat-subtext\",\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-list\",\n        children: [messages.map((message, index) => {\n          var _chat$other_participa, _chat$other_participa2;\n          const prevMessage = index > 0 ? messages[index - 1] : null;\n          const showDate = !prevMessage || formatDate(prevMessage.created_at) !== formatDate(message.created_at);\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [showDate && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-separator\",\n              children: formatDate(message.created_at)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message ${message.sender_name === (((_chat$other_participa = chat.other_participant) === null || _chat$other_participa === void 0 ? void 0 : _chat$other_participa.first_name) || 'Пользователь') ? 'incoming-message' : 'my-message'}`,\n              onContextMenu: e => handleContextMenu(e, message),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: [message.reply_to_message && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"reply-to-message\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"reply-line\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"reply-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"reply-author\",\n                      children: message.reply_to_message.sender_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 501,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"reply-text\",\n                      children: message.reply_to_message.content\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 502,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 25\n                }, this), editingMessageId === message.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-message-form\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: editText,\n                    onChange: e => setEditText(e.target.value),\n                    onKeyPress: e => {\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        saveEdit();\n                      }\n                    },\n                    autoFocus: true,\n                    rows: 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"edit-message-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"save-btn\",\n                      onClick: saveEdit,\n                      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: faCheck\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 524,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 523,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"cancel-btn\",\n                      onClick: cancelEdit,\n                      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: faTimes\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 527,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 526,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [message.file_url && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"message-file\",\n                    children: message.message_type === 'image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: message.file_url,\n                      alt: \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\",\n                      className: \"message-image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 537,\n                      columnNumber: 33\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"file-message\",\n                      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: getFileIcon(message.message_type),\n                        className: \"file-icon\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 540,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"file-info\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"file-name\",\n                          children: message.file_url.split('/').pop()\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 545,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"file-size\",\n                          children: message.file_size\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 546,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 544,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"download-btn\",\n                        title: \"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\",\n                        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                          icon: faDownload\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 549,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 548,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 539,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 29\n                  }, this), message.content && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"message-text\",\n                    children: message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"message-meta\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"message-time\",\n                      children: formatTime(message.created_at)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 563,\n                      columnNumber: 29\n                    }, this), message.is_edited && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"edited-indicator\",\n                      children: \"(\\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u043E)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 31\n                    }, this), message.sender_name !== (((_chat$other_participa2 = chat.other_participant) === null || _chat$other_participa2 === void 0 ? void 0 : _chat$other_participa2.first_name) || 'Пользователь') && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"message-status\",\n                      children: message.is_read ? /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: faCheckDouble,\n                        className: \"read\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 570,\n                        columnNumber: 35\n                      }, this) : /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: faCheck\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 572,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 568,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 19\n            }, this)]\n          }, message.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 17\n          }, this);\n        }), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"typing-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"typing-avatar\",\n            children: otherUser !== null && otherUser !== void 0 && otherUser.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: otherUser.avatar,\n              alt: otherUser.first_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatar-placeholder\",\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faUser\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"typing-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"typing-text\",\n              children: [otherUser === null || otherUser === void 0 ? void 0 : otherUser.first_name, \" \\u043F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-dots\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"typing-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"typing-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"typing-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-input-container\",\n      children: [replyToMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reply-to-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reply-line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reply-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reply-author\",\n            children: replyToMessage.sender_name === ((otherUser === null || otherUser === void 0 ? void 0 : otherUser.first_name) || 'Пользователь') ? otherUser === null || otherUser === void 0 ? void 0 : otherUser.first_name : 'Вы'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 620,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reply-text\",\n            children: replyToMessage.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"reply-remove\",\n          onClick: removeReply,\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 11\n      }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-files\",\n        children: selectedFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selected-file\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: getFileIcon(file.type),\n            className: \"file-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"file-name\",\n            children: file.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"remove-file-btn\",\n            onClick: () => removeFile(file.id),\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTimes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 17\n          }, this)]\n        }, file.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"attachment-button\",\n          onClick: () => setShowAttachmentMenu(!showAttachmentMenu),\n          title: \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPaperclip\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: textareaRef,\n            className: \"message-input\",\n            placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n            value: newMessage,\n            onChange: handleTextChange,\n            onKeyPress: handleKeyPress,\n            rows: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"emoji-button\",\n            onClick: () => setShowEmojiPicker(!showEmojiPicker),\n            title: \"\\u042D\\u043C\\u043E\\u0434\\u0437\\u0438\",\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSmile\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: handleSendMessage,\n          disabled: !newMessage.trim() && selectedFiles.length === 0,\n          title: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPaperPlane\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: true,\n        accept: \"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\",\n        onChange: handleFileSelect,\n        className: \"file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 7\n    }, this), showAttachmentMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"attachment-menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"attachment-option\",\n        onClick: () => {\n          var _fileInputRef$current;\n          (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          setShowAttachmentMenu(false);\n        },\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0424\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 706,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"attachment-option\",\n        onClick: () => {\n          var _fileInputRef$current2;\n          (_fileInputRef$current2 = fileInputRef.current) === null || _fileInputRef$current2 === void 0 ? void 0 : _fileInputRef$current2.click();\n          setShowAttachmentMenu(false);\n        },\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 9\n    }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"emoji-picker\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emoji-grid\",\n        children: emojis.map((emoji, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"emoji-button\",\n          onClick: () => addEmoji(emoji),\n          children: emoji\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 9\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"context-menu\",\n      style: {\n        left: contextMenu.x,\n        top: contextMenu.y\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-menu-item\",\n        onClick: () => handleReply(contextMenu.message),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faReply,\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 13\n        }, this), \"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-menu-item\",\n        onClick: () => {\n          navigator.clipboard.writeText(contextMenu.message.content);\n          setContextMenu(null);\n        },\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faCopy,\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 13\n        }, this), \"\\u041A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 762,\n        columnNumber: 11\n      }, this), contextMenu.message.sender_name !== (((_chat$other_participa3 = chat.other_participant) === null || _chat$other_participa3 === void 0 ? void 0 : _chat$other_participa3.first_name) || 'Пользователь') && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"context-menu-item\",\n          onClick: () => startEditing(contextMenu.message),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faEdit,\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 778,\n            columnNumber: 17\n          }, this), \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"context-menu-item\",\n          onClick: () => handleDeleteMessage(contextMenu.message),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTrash,\n            className: \"icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 785,\n            columnNumber: 17\n          }, this), \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 420,\n    columnNumber: 5\n  }, this);\n};\n_s(TelegramChat, \"IZ6KT7UREFZLFJPvaMgVx8DKlgc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = TelegramChat;\nexport default TelegramChat;\nvar _c;\n$RefreshReg$(_c, \"TelegramChat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","FontAwesomeIcon","faArrowLeft","faPaperPlane","faEdit","faTrash","faCheck","faTimes","faUser","faMessage","faReply","faImage","faFile","faMicrophone","faPaperclip","faSmile","faEllipsisV","faPhone","faVideo","faSearch","faDownload","faShare","faCopy","faForward","faClock","faCheckDouble","apiClient","jsxDEV","_jsxDEV","Fragment","_Fragment","TelegramChat","_s","_chat$other_participa3","chatId","navigate","messagesEndRef","fileInputRef","textareaRef","chat","setChat","messages","setMessages","newMessage","setNewMessage","isLoading","setIsLoading","isTyping","setIsTyping","typingTimeout","setTypingTimeout","editingMessageId","setEditingMessageId","editText","setEditText","contextMenu","setContextMenu","showEmojiPicker","setShowEmojiPicker","showAttachmentMenu","setShowAttachmentMenu","selectedFiles","setSelectedFiles","uploadingFiles","setUploadingFiles","replyToMessage","setReplyToMessage","currentPage","setCurrentPage","hasMoreMessages","setHasMoreMessages","loadingMore","setLoadingMore","loadChat","scrollToBottom","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","current","scrollIntoView","behavior","response","request","success","pagination","has_next","console","error","message","loadMoreMessages","nextPage","newMessages","prev","handleSendMessage","trim","length","formData","FormData","append","id","forEach","file","index","method","body","headers","token","last_message","updated_at","Date","toISOString","handleKeyPress","e","key","shiftKey","preventDefault","handleTextChange","value","style","height","scrollHeight","clearTimeout","timeout","setTimeout","handleFileSelect","files","Array","from","validFiles","filter","maxSize","size","alert","name","fileObjects","map","now","Math","random","type","removeFile","fileId","getFileIcon","fileType","startsWith","formatFileSize","bytes","k","sizes","i","floor","log","parseFloat","pow","toFixed","handleContextMenu","x","clientX","y","clientY","startEditing","content","saveEdit","JSON","stringify","m","cancelEdit","handleDeleteMessage","handleReply","removeReply","formatTime","timestamp","date","toLocaleTimeString","hour","minute","formatDate","today","yesterday","setDate","getDate","toDateString","toLocaleDateString","day","month","addEmoji","emoji","emojis","className","children","fileName","_jsxFileName","lineNumber","columnNumber","icon","onClick","otherUser","other_participant","avatar","src","alt","first_name","title","onScroll","scrollTop","_chat$other_participa","_chat$other_participa2","prevMessage","showDate","created_at","sender_name","onContextMenu","reply_to_message","onChange","onKeyPress","autoFocus","rows","file_url","message_type","split","pop","file_size","is_edited","is_read","ref","placeholder","disabled","multiple","accept","_fileInputRef$current","click","_fileInputRef$current2","left","top","navigator","clipboard","writeText","_c","$RefreshReg$"],"sources":["C:/Users/Wlad/OneDrive/Desktop/kwork_site/src/components/TelegramChat/TelegramChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { \r\n  faArrowLeft, \r\n  faPaperPlane, \r\n  faEdit, \r\n  faTrash, \r\n  faCheck, \r\n  faTimes,\r\n  faUser,\r\n  faMessage,\r\n  faReply,\r\n  faImage,\r\n  faFile,\r\n  faMicrophone,\r\n  faPaperclip,\r\n  faSmile,\r\n  faEllipsisV,\r\n  faPhone,\r\n  faVideo,\r\n  faSearch,\r\n  faDownload,\r\n  faShare,\r\n  faCopy,\r\n  faForward,\r\n  faClock,\r\n  faCheckDouble\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { apiClient } from '../../utils/api';\r\nimport './TelegramChat.css';\r\n\r\nconst TelegramChat = () => {\r\n  const { chatId } = useParams();\r\n  const navigate = useNavigate();\r\n  const messagesEndRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const textareaRef = useRef(null);\r\n  \r\n  // Основные состояния\r\n  const [chat, setChat] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [typingTimeout, setTypingTimeout] = useState(null);\r\n  \r\n  // Редактирование сообщений\r\n  const [editingMessageId, setEditingMessageId] = useState(null);\r\n  const [editText, setEditText] = useState('');\r\n  \r\n  // Контекстное меню и модальные окна\r\n  const [contextMenu, setContextMenu] = useState(null);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [showAttachmentMenu, setShowAttachmentMenu] = useState(false);\r\n  \r\n  // Файлы и медиа\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [uploadingFiles, setUploadingFiles] = useState(false);\r\n  \r\n  // Ответы на сообщения\r\n  const [replyToMessage, setReplyToMessage] = useState(null);\r\n  \r\n  // Пагинация\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMoreMessages, setHasMoreMessages] = useState(true);\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n\r\n  // Загрузка чата при монтировании компонента\r\n  useEffect(() => {\r\n    if (chatId) {\r\n      loadChat();\r\n    }\r\n  }, [chatId]);\r\n\r\n  // Автоскролл к последнему сообщению\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Обработка клика вне контекстного меню\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (contextMenu && !event.target.closest('.context-menu')) {\r\n        setContextMenu(null);\r\n      }\r\n      if (showEmojiPicker && !event.target.closest('.emoji-picker')) {\r\n        setShowEmojiPicker(false);\r\n      }\r\n      if (showAttachmentMenu && !event.target.closest('.attachment-menu')) {\r\n        setShowAttachmentMenu(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [contextMenu, showEmojiPicker, showAttachmentMenu]);\r\n\r\n  // Функция скролла к низу\r\n  const scrollToBottom = () => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  // Загрузка чата\r\n  const loadChat = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await apiClient.request(`/users/chats/${chatId}/`);\r\n      \r\n      if (response.success) {\r\n        setChat(response.chat);\r\n        setMessages(response.messages); // Сообщения уже в правильном порядке\r\n        setHasMoreMessages(response.pagination.has_next);\r\n      } else {\r\n        console.error('Ошибка загрузки чата:', response.message);\r\n        navigate('/chats');\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка загрузки чата:', error);\r\n      navigate('/chats');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Загрузка дополнительных сообщений\r\n  const loadMoreMessages = async () => {\r\n    if (loadingMore || !hasMoreMessages) return;\r\n    \r\n    try {\r\n      setLoadingMore(true);\r\n      const nextPage = currentPage + 1;\r\n      const response = await apiClient.request(`/users/chats/${chatId}/?page=${nextPage}`);\r\n      \r\n      if (response.success) {\r\n        const newMessages = response.messages;\r\n        setMessages(prev => [...newMessages, ...prev]);\r\n        setCurrentPage(nextPage);\r\n        setHasMoreMessages(response.pagination.has_next);\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка загрузки дополнительных сообщений:', error);\r\n    } finally {\r\n      setLoadingMore(false);\r\n    }\r\n  };\r\n\r\n  // Обработка отправки сообщения\r\n  const handleSendMessage = async () => {\r\n    if (!newMessage.trim() && selectedFiles.length === 0) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append('content', newMessage.trim());\r\n    \r\n    if (replyToMessage) {\r\n      formData.append('reply_to', replyToMessage.id);\r\n    }\r\n\r\n    // Добавляем файлы\r\n    selectedFiles.forEach((file, index) => {\r\n      formData.append('file', file.file);\r\n    });\r\n\r\n    try {\r\n      const response = await apiClient.request(`/users/chats/${chatId}/messages/`, {\r\n        method: 'POST',\r\n        body: formData,\r\n        headers: {\r\n          'Authorization': `Bearer ${apiClient.token}`\r\n        }\r\n      });\r\n\r\n      if (response.success) {\r\n        setMessages(prev => [...prev, response.message]);\r\n        setNewMessage('');\r\n        setSelectedFiles([]);\r\n        setReplyToMessage(null);\r\n        setShowAttachmentMenu(false);\r\n        \r\n        // Обновляем информацию о чате\r\n        if (chat) {\r\n          setChat(prev => ({\r\n            ...prev,\r\n            last_message: response.message,\r\n            updated_at: new Date().toISOString()\r\n          }));\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка отправки сообщения:', error);\r\n    }\r\n  };\r\n\r\n  // Обработка нажатия Enter\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  // Обработка изменения текста (индикатор набора)\r\n  const handleTextChange = (e) => {\r\n    setNewMessage(e.target.value);\r\n    \r\n    // Автоматическое изменение высоты textarea\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto';\r\n      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';\r\n    }\r\n    \r\n    // Показываем индикатор набора текста\r\n    if (!isTyping) {\r\n      setIsTyping(true);\r\n    }\r\n    \r\n    // Сбрасываем таймер\r\n    if (typingTimeout) {\r\n      clearTimeout(typingTimeout);\r\n    }\r\n    \r\n    // Скрываем индикатор через 2 секунды\r\n    const timeout = setTimeout(() => {\r\n      setIsTyping(false);\r\n    }, 2000);\r\n    \r\n    setTypingTimeout(timeout);\r\n  };\r\n\r\n  // Обработка выбора файлов\r\n  const handleFileSelect = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    const validFiles = files.filter(file => {\r\n      const maxSize = 10 * 1024 * 1024; // 10MB\r\n      if (file.size > maxSize) {\r\n        alert(`Файл ${file.name} слишком большой. Максимальный размер: 10MB`);\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n\r\n    const fileObjects = validFiles.map(file => ({\r\n      id: Date.now() + Math.random(),\r\n      name: file.name,\r\n      size: file.size,\r\n      type: file.type,\r\n      file: file\r\n    }));\r\n\r\n    setSelectedFiles(prev => [...prev, ...fileObjects]);\r\n    setShowAttachmentMenu(false);\r\n    \r\n    // Очищаем input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  // Удаление выбранного файла\r\n  const removeFile = (fileId) => {\r\n    setSelectedFiles(prev => prev.filter(file => file.id !== fileId));\r\n  };\r\n\r\n  // Получение иконки для типа файла\r\n  const getFileIcon = (fileType) => {\r\n    if (fileType.startsWith('image/')) return faImage;\r\n    return faFile;\r\n  };\r\n\r\n  // Форматирование размера файла\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  // Обработка контекстного меню\r\n  const handleContextMenu = (e, message) => {\r\n    e.preventDefault();\r\n    setContextMenu({\r\n      x: e.clientX,\r\n      y: e.clientY,\r\n      message: message\r\n    });\r\n  };\r\n\r\n  // Начало редактирования сообщения\r\n  const startEditing = (message) => {\r\n    setEditingMessageId(message.id);\r\n    setEditText(message.content);\r\n    setContextMenu(null);\r\n  };\r\n\r\n  // Сохранение редактирования\r\n  const saveEdit = async () => {\r\n    if (!editText.trim()) return;\r\n\r\n    try {\r\n      const response = await apiClient.request(`/users/chats/${chatId}/messages/${editingMessageId}/`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify({ content: editText.trim() })\r\n      });\r\n\r\n      if (response.success) {\r\n        setMessages(prev => prev.map(m => \r\n          m.id === editingMessageId ? response.message : m\r\n        ));\r\n        setEditingMessageId(null);\r\n        setEditText('');\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка редактирования сообщения:', error);\r\n    }\r\n  };\r\n\r\n  // Отмена редактирования\r\n  const cancelEdit = () => {\r\n    setEditingMessageId(null);\r\n    setEditText('');\r\n  };\r\n\r\n  // Удаление сообщения\r\n  const handleDeleteMessage = async (message) => {\r\n    try {\r\n      const response = await apiClient.request(`/users/chats/${chatId}/messages/${message.id}/delete/`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      if (response.success) {\r\n        setMessages(prev => prev.filter(m => m.id !== message.id));\r\n      }\r\n    } catch (error) {\r\n      console.error('Ошибка удаления сообщения:', error);\r\n    }\r\n    setContextMenu(null);\r\n  };\r\n\r\n  // Ответ на сообщение\r\n  const handleReply = (message) => {\r\n    setReplyToMessage(message);\r\n    setContextMenu(null);\r\n  };\r\n\r\n  // Удаление ответа\r\n  const removeReply = () => {\r\n    setReplyToMessage(null);\r\n  };\r\n\r\n  // Форматирование времени\r\n  const formatTime = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString('ru-RU', { \r\n      hour: '2-digit', \r\n      minute: '2-digit' \r\n    });\r\n  };\r\n\r\n  // Форматирование даты\r\n  const formatDate = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    const today = new Date();\r\n    const yesterday = new Date(today);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n    if (date.toDateString() === today.toDateString()) {\r\n      return 'Сегодня';\r\n    } else if (date.toDateString() === yesterday.toDateString()) {\r\n      return 'Вчера';\r\n    } else {\r\n      return date.toLocaleDateString('ru-RU', { \r\n        day: 'numeric', \r\n        month: 'long' \r\n      });\r\n    }\r\n  };\r\n\r\n  // Добавление эмодзи\r\n  const addEmoji = (emoji) => {\r\n    setNewMessage(prev => prev + emoji);\r\n    setShowEmojiPicker(false);\r\n  };\r\n\r\n  // Эмодзи для выбора\r\n  const emojis = ['😀', '😃', '😄', '😁', '😆', '😅', '😂', '🤣', '😊', '😇', '🙂', '🙃', '😉', '😌', '😍', '🥰', '😘', '😗', '😙', '😚', '😋', '😛', '😝', '😜', '🤪', '🤨', '🧐', '🤓', '😎', '🤩', '🥳', '😏', '😒', '😞', '😔', '😟', '😕', '🙁', '☹️', '😣', '😖', '😫', '😩', '🥺', '😢', '😭', '😤', '😠', '😡', '🤬', '🤯', '😳', '🥵', '🥶', '😱', '😨', '😰', '😥', '😓', '🤗', '🤔', '🤭', '🤫', '🤥', '😶', '😐', '😑', '😬', '🙄', '😯', '😦', '😧', '😮', '😲', '🥱', '😴', '🤤', '😪', '😵', '🤐', '🥴', '🤢', '🤮', '🤧', '😷', '🤒', '🤕', '🤑', '🤠', '😈', '👿', '👹', '👺', '🤡', '💩', '👻', '💀', '☠️', '👽', '👾', '🤖', '🎃', '😺', '😸', '😹', '😻', '😼', '😽', '🙀', '😿', '😾'];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"telegram-chat\">\r\n        <div className=\"chat-loading\">\r\n          <div className=\"loading-spinner\"></div>\r\n          <p>Загрузка чата...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!chat) {\r\n    return (\r\n      <div className=\"telegram-chat\">\r\n        <div className=\"chat-error\">\r\n          <FontAwesomeIcon icon={faMessage} className=\"error-icon\" />\r\n          <p>Чат не найден</p>\r\n          <button onClick={() => navigate('/chats')} className=\"back-button\">\r\n            Вернуться к чатам\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const otherUser = chat.other_participant;\r\n\r\n  return (\r\n    <div className=\"telegram-chat\">\r\n      {/* Заголовок чата */}\r\n      <div className=\"chat-header\">\r\n        <div className=\"chat-header-left\">\r\n          <button className=\"back-button\" onClick={() => navigate('/chats')}>\r\n            <FontAwesomeIcon icon={faArrowLeft} />\r\n          </button>\r\n          <div className=\"chat-user-info\">\r\n            <div className=\"user-avatar\">\r\n              {otherUser?.avatar ? (\r\n                <img src={otherUser.avatar} alt={otherUser.first_name} />\r\n              ) : (\r\n                <div className=\"avatar-placeholder\">\r\n                  <FontAwesomeIcon icon={faUser} />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"user-details\">\r\n              <h3 className=\"user-name\">{otherUser?.first_name || 'Пользователь'}</h3>\r\n              <span className=\"user-status\">в сети</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-header-right\">\r\n          <button className=\"header-button\" title=\"Поиск\">\r\n            <FontAwesomeIcon icon={faSearch} />\r\n          </button>\r\n          <button className=\"header-button\" title=\"Звонок\">\r\n            <FontAwesomeIcon icon={faPhone} />\r\n          </button>\r\n          <button className=\"header-button\" title=\"Видеозвонок\">\r\n            <FontAwesomeIcon icon={faVideo} />\r\n          </button>\r\n          <button className=\"header-button\" title=\"Меню\">\r\n            <FontAwesomeIcon icon={faEllipsisV} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Контейнер сообщений */}\r\n      <div className=\"messages-container\" onScroll={(e) => {\r\n        if (e.target.scrollTop === 0 && hasMoreMessages && !loadingMore) {\r\n          loadMoreMessages();\r\n        }\r\n      }}>\r\n        {loadingMore && (\r\n          <div className=\"loading-more\">\r\n            <div className=\"loading-spinner\"></div>\r\n          </div>\r\n        )}\r\n        \r\n        {messages.length === 0 ? (\r\n          <div className=\"empty-chat\">\r\n            <FontAwesomeIcon icon={faMessage} className=\"empty-chat-icon\" />\r\n            <div className=\"empty-chat-text\">Начните общение</div>\r\n            <div className=\"empty-chat-subtext\">Отправьте первое сообщение</div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"messages-list\">\r\n            {messages.map((message, index) => {\r\n              const prevMessage = index > 0 ? messages[index - 1] : null;\r\n              const showDate = !prevMessage || \r\n                formatDate(prevMessage.created_at) !== formatDate(message.created_at);\r\n              \r\n              return (\r\n                <React.Fragment key={message.id}>\r\n                  {showDate && (\r\n                    <div className=\"date-separator\">\r\n                      {formatDate(message.created_at)}\r\n                    </div>\r\n                  )}\r\n                  <div\r\n                    className={`message ${message.sender_name === (chat.other_participant?.first_name || 'Пользователь') ? 'incoming-message' : 'my-message'}`}\r\n                    onContextMenu={(e) => handleContextMenu(e, message)}\r\n                  >\r\n                    <div className=\"message-content\">\r\n                      {/* Ответ на сообщение */}\r\n                      {message.reply_to_message && (\r\n                        <div className=\"reply-to-message\">\r\n                          <div className=\"reply-line\"></div>\r\n                          <div className=\"reply-content\">\r\n                            <div className=\"reply-author\">{message.reply_to_message.sender_name}</div>\r\n                            <div className=\"reply-text\">{message.reply_to_message.content}</div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Редактирование сообщения */}\r\n                      {editingMessageId === message.id ? (\r\n                        <div className=\"edit-message-form\">\r\n                          <textarea\r\n                            value={editText}\r\n                            onChange={(e) => setEditText(e.target.value)}\r\n                            onKeyPress={(e) => {\r\n                              if (e.key === 'Enter' && !e.shiftKey) {\r\n                                e.preventDefault();\r\n                                saveEdit();\r\n                              }\r\n                            }}\r\n                            autoFocus\r\n                            rows={3}\r\n                          />\r\n                          <div className=\"edit-message-actions\">\r\n                            <button className=\"save-btn\" onClick={saveEdit}>\r\n                              <FontAwesomeIcon icon={faCheck} />\r\n                            </button>\r\n                            <button className=\"cancel-btn\" onClick={cancelEdit}>\r\n                              <FontAwesomeIcon icon={faTimes} />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <>\r\n                          {/* Файлы в сообщении */}\r\n                          {message.file_url && (\r\n                            <div className=\"message-file\">\r\n                              {message.message_type === 'image' ? (\r\n                                <img src={message.file_url} alt=\"Изображение\" className=\"message-image\" />\r\n                              ) : (\r\n                                <div className=\"file-message\">\r\n                                  <FontAwesomeIcon \r\n                                    icon={getFileIcon(message.message_type)} \r\n                                    className=\"file-icon\" \r\n                                  />\r\n                                  <div className=\"file-info\">\r\n                                    <div className=\"file-name\">{message.file_url.split('/').pop()}</div>\r\n                                    <div className=\"file-size\">{message.file_size}</div>\r\n                                  </div>\r\n                                  <button className=\"download-btn\" title=\"Скачать\">\r\n                                    <FontAwesomeIcon icon={faDownload} />\r\n                                  </button>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n\r\n                          {/* Текст сообщения */}\r\n                          {message.content && (\r\n                            <p className=\"message-text\">{message.content}</p>\r\n                          )}\r\n\r\n                          {/* Мета-информация */}\r\n                          <div className=\"message-meta\">\r\n                            <span className=\"message-time\">{formatTime(message.created_at)}</span>\r\n                            {message.is_edited && (\r\n                              <span className=\"edited-indicator\">(изменено)</span>\r\n                            )}\r\n                            {message.sender_name !== (chat.other_participant?.first_name || 'Пользователь') && (\r\n                              <span className=\"message-status\">\r\n                                {message.is_read ? (\r\n                                  <FontAwesomeIcon icon={faCheckDouble} className=\"read\" />\r\n                                ) : (\r\n                                  <FontAwesomeIcon icon={faCheck} />\r\n                                )}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n\r\n            {/* Индикатор набора текста */}\r\n            {isTyping && (\r\n              <div className=\"typing-indicator\">\r\n                <div className=\"typing-avatar\">\r\n                  {otherUser?.avatar ? (\r\n                    <img src={otherUser.avatar} alt={otherUser.first_name} />\r\n                  ) : (\r\n                    <div className=\"avatar-placeholder\">\r\n                      <FontAwesomeIcon icon={faUser} />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div className=\"typing-content\">\r\n                  <span className=\"typing-text\">{otherUser?.first_name} печатает</span>\r\n                  <div className=\"typing-dots\">\r\n                    <div className=\"typing-dot\"></div>\r\n                    <div className=\"typing-dot\"></div>\r\n                    <div className=\"typing-dot\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Контейнер ввода сообщения */}\r\n      <div className=\"message-input-container\">\r\n        {/* Ответ на сообщение */}\r\n        {replyToMessage && (\r\n          <div className=\"reply-to-message\">\r\n            <div className=\"reply-line\"></div>\r\n            <div className=\"reply-content\">\r\n              <div className=\"reply-author\">\r\n                {replyToMessage.sender_name === (otherUser?.first_name || 'Пользователь') ? otherUser?.first_name : 'Вы'}\r\n              </div>\r\n              <div className=\"reply-text\">{replyToMessage.content}</div>\r\n            </div>\r\n            <button className=\"reply-remove\" onClick={removeReply}>\r\n              <FontAwesomeIcon icon={faTimes} />\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Выбранные файлы */}\r\n        {selectedFiles.length > 0 && (\r\n          <div className=\"selected-files\">\r\n            {selectedFiles.map((file) => (\r\n              <div key={file.id} className=\"selected-file\">\r\n                <FontAwesomeIcon \r\n                  icon={getFileIcon(file.type)} \r\n                  className=\"file-icon\" \r\n                />\r\n                <span className=\"file-name\">{file.name}</span>\r\n                <button \r\n                  className=\"remove-file-btn\"\r\n                  onClick={() => removeFile(file.id)}\r\n                >\r\n                  <FontAwesomeIcon icon={faTimes} />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Форма ввода */}\r\n        <div className=\"message-input-wrapper\">\r\n          <button \r\n            className=\"attachment-button\"\r\n            onClick={() => setShowAttachmentMenu(!showAttachmentMenu)}\r\n            title=\"Прикрепить файл\"\r\n          >\r\n            <FontAwesomeIcon icon={faPaperclip} />\r\n          </button>\r\n          \r\n          <div className=\"input-container\">\r\n            <textarea\r\n              ref={textareaRef}\r\n              className=\"message-input\"\r\n              placeholder=\"Сообщение\"\r\n              value={newMessage}\r\n              onChange={handleTextChange}\r\n              onKeyPress={handleKeyPress}\r\n              rows={1}\r\n            />\r\n            \r\n            <button \r\n              className=\"emoji-button\"\r\n              onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n              title=\"Эмодзи\"\r\n            >\r\n              <FontAwesomeIcon icon={faSmile} />\r\n            </button>\r\n          </div>\r\n          \r\n          <button \r\n            className=\"send-button\"\r\n            onClick={handleSendMessage}\r\n            disabled={!newMessage.trim() && selectedFiles.length === 0}\r\n            title=\"Отправить\"\r\n          >\r\n            <FontAwesomeIcon icon={faPaperPlane} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Скрытый input для файлов */}\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          accept=\"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\"\r\n          onChange={handleFileSelect}\r\n          className=\"file-input\"\r\n        />\r\n      </div>\r\n\r\n      {/* Меню прикрепления файлов */}\r\n      {showAttachmentMenu && (\r\n        <div className=\"attachment-menu\">\r\n          <button \r\n            className=\"attachment-option\"\r\n            onClick={() => {\r\n              fileInputRef.current?.click();\r\n              setShowAttachmentMenu(false);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faImage} />\r\n            <span>Фото</span>\r\n          </button>\r\n          <button \r\n            className=\"attachment-option\"\r\n            onClick={() => {\r\n              fileInputRef.current?.click();\r\n              setShowAttachmentMenu(false);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faFile} />\r\n            <span>Документ</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Эмодзи пикер */}\r\n      {showEmojiPicker && (\r\n        <div className=\"emoji-picker\">\r\n          <div className=\"emoji-grid\">\r\n            {emojis.map((emoji, index) => (\r\n              <button\r\n                key={index}\r\n                className=\"emoji-button\"\r\n                onClick={() => addEmoji(emoji)}\r\n              >\r\n                {emoji}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Контекстное меню */}\r\n      {contextMenu && (\r\n        <div\r\n          className=\"context-menu\"\r\n          style={{\r\n            left: contextMenu.x,\r\n            top: contextMenu.y\r\n          }}\r\n        >\r\n          <div \r\n            className=\"context-menu-item\"\r\n            onClick={() => handleReply(contextMenu.message)}\r\n          >\r\n            <FontAwesomeIcon icon={faReply} className=\"icon\" />\r\n            Ответить\r\n          </div>\r\n          <div \r\n            className=\"context-menu-item\"\r\n            onClick={() => {\r\n              navigator.clipboard.writeText(contextMenu.message.content);\r\n              setContextMenu(null);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faCopy} className=\"icon\" />\r\n            Копировать\r\n          </div>\r\n          {contextMenu.message.sender_name !== (chat.other_participant?.first_name || 'Пользователь') && (\r\n            <>\r\n              <div \r\n                className=\"context-menu-item\"\r\n                onClick={() => startEditing(contextMenu.message)}\r\n              >\r\n                <FontAwesomeIcon icon={faEdit} className=\"icon\" />\r\n                Редактировать\r\n              </div>\r\n              <div \r\n                className=\"context-menu-item\"\r\n                onClick={() => handleDeleteMessage(contextMenu.message)}\r\n              >\r\n                <FontAwesomeIcon icon={faTrash} className=\"icon\" />\r\n                Удалить\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TelegramChat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}