{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wlad\\\\OneDrive\\\\Desktop\\\\kwork_site\\\\src\\\\components\\\\ChatPage\\\\ChatPageTest.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faPaperPlane, faEdit, faTrash, faCheck, faTimes, faUser, faMessage, faReply, faImage, faFile, faPaperclip, faFilePdf, faFileWord, faFileText, faFileArchive } from '@fortawesome/free-solid-svg-icons';\nimport './ChatPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPageTest = () => {\n  _s();\n  var _chatUser$name;\n  const {\n    chatId\n  } = useParams();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: 'Привет! Как дела?',\n    sender_id: 2,\n    created_at: new Date().toISOString(),\n    files: []\n  }, {\n    id: 2,\n    text: 'Привет! Всё отлично, спасибо!',\n    sender_id: 1,\n    created_at: new Date().toISOString(),\n    files: []\n  }]);\n  const [newMessage, setNewMessage] = useState('');\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editText, setEditText] = useState('');\n  const [currentUser] = useState({\n    id: 1,\n    name: 'Вы'\n  });\n  const [chatUser] = useState({\n    id: 2,\n    name: 'Тестовый пользователь',\n    city: 'Москва'\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingUsers, setTypingUsers] = useState(new Set());\n  const [contextMenu, setContextMenu] = useState(null);\n  const [modalMessage, setModalMessage] = useState(null);\n  const [swipeStartX, setSwipeStartX] = useState(null);\n  const [swipeStartY, setSwipeStartY] = useState(null);\n  const [replyToMessage, setReplyToMessage] = useState(null);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [showMediaOptions, setShowMediaOptions] = useState(false);\n  const [sendingMessage, setSendingMessage] = useState(false);\n\n  // Автоскролл к последнему сообщению\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() && selectedFiles.length === 0 || sendingMessage) return;\n    try {\n      setSendingMessage(true);\n\n      // Создаем новое сообщение\n      const newMsg = {\n        id: Date.now(),\n        text: newMessage.trim(),\n        sender_id: currentUser.id,\n        created_at: new Date().toISOString(),\n        files: selectedFiles.map((file, index) => ({\n          id: index + 1,\n          filename: file.name,\n          file_size: file.size,\n          file_type: file.type\n        }))\n      };\n      setMessages(prev => [...prev, newMsg]);\n      setNewMessage('');\n      setSelectedFiles([]);\n      setShowMediaOptions(false);\n\n      // Симуляция ответа собеседника\n      setTimeout(() => {\n        const replyMsg = {\n          id: Date.now() + 1,\n          text: 'Спасибо за сообщение!',\n          sender_id: chatUser.id,\n          created_at: new Date().toISOString(),\n          files: []\n        };\n        setMessages(prev => [...prev, replyMsg]);\n      }, 1000 + Math.random() * 2000);\n    } catch (error) {\n      console.error('Ошибка отправки сообщения:', error);\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n  const handleEditMessage = async () => {\n    if (!editText.trim()) return;\n    try {\n      setMessages(prev => prev.map(msg => msg.id === editingMessageId ? {\n        ...msg,\n        text: editText.trim(),\n        edited_at: new Date().toISOString()\n      } : msg));\n      setEditingMessageId(null);\n      setEditText('');\n    } catch (error) {\n      console.error('Ошибка редактирования сообщения:', error);\n    }\n  };\n  const handleDeleteMessage = async messageId => {\n    try {\n      setMessages(prev => prev.filter(msg => msg.id !== messageId));\n      setContextMenu(null);\n    } catch (error) {\n      console.error('Ошибка удаления сообщения:', error);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const handleInputChange = e => {\n    setNewMessage(e.target.value);\n  };\n  const handleFileSelect = e => {\n    const files = Array.from(e.target.files);\n    setSelectedFiles(prev => [...prev, ...files]);\n    setShowMediaOptions(false);\n  };\n  const removeFile = index => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  const handleMediaOptionClick = type => {\n    if (type === 'photo') {\n      fileInputRef.current.accept = 'image/*';\n    } else if (type === 'document') {\n      fileInputRef.current.accept = '.pdf,.doc,.docx,.txt,.zip,.rar';\n    }\n    fileInputRef.current.click();\n  };\n  const getFileIcon = file => {\n    const extension = file.name.split('.').pop().toLowerCase();\n    switch (extension) {\n      case 'pdf':\n        return faFilePdf;\n      case 'doc':\n      case 'docx':\n        return faFileWord;\n      case 'txt':\n        return faFileText;\n      case 'zip':\n      case 'rar':\n        return faFileArchive;\n      default:\n        return faFile;\n    }\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n  const handleContextMenu = (e, message) => {\n    e.preventDefault();\n    if (message.sender_id === currentUser.id) {\n      setContextMenu({\n        x: e.clientX,\n        y: e.clientY,\n        message: message\n      });\n    }\n  };\n  const closeContextMenu = () => {\n    setContextMenu(null);\n  };\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('ru-RU', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-page\",\n    onClick: closeContextMenu,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-button\",\n        onClick: () => navigate('/friends'),\n        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faArrowLeft\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-avatar\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/default-avatar.png\",\n            alt: (chatUser === null || chatUser === void 0 ? void 0 : chatUser.name) || 'Пользователь',\n            onError: e => {\n              e.target.style.display = 'none';\n              e.target.nextSibling.style.display = 'flex';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'none',\n              width: '100%',\n              height: '100%',\n              backgroundColor: '#8b5cf6',\n              color: 'white',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontSize: '18px',\n              fontWeight: 'bold'\n            },\n            children: (chatUser === null || chatUser === void 0 ? void 0 : (_chatUser$name = chatUser.name) === null || _chatUser$name === void 0 ? void 0 : _chatUser$name.charAt(0)) || 'Т'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"user-name\",\n            children: (chatUser === null || chatUser === void 0 ? void 0 : chatUser.name) || 'Пользователь'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-city\",\n            children: [\"\\uD83D\\uDCCD \", (chatUser === null || chatUser === void 0 ? void 0 : chatUser.city) || 'Город не указан']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-list\",\n        children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.sender_id === currentUser.id ? 'my-message' : 'incoming-message'}`,\n          onContextMenu: e => handleContextMenu(e, message),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [message.text && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"message-text\",\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 19\n            }, this), message.files && message.files.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-files\",\n              children: message.files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-file\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: getFileIcon(file)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"file-name\",\n                  children: file.filename\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"file-size\",\n                  children: [\"(\", formatFileSize(file.file_size), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 25\n                }, this)]\n              }, file.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: formatTime(message.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 19\n              }, this), message.edited_at && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"edited-indicator\",\n                children: \"(\\u0440\\u0435\\u0434.)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 21\n              }, this), message.sender_id === currentUser.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-status\",\n                children: \"\\u2713\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this)), typingUsers.size > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"typing-indicator\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-files\",\n      children: selectedFiles.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-file\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: getFileIcon(file)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-name\",\n          children: file.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-size\",\n          children: [\"(\", formatFileSize(file.size), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"remove-file-btn\",\n          onClick: () => removeFile(index),\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }, this), showMediaOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"media-option\",\n        onClick: () => handleMediaOptionClick('photo'),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), \"\\u0424\\u043E\\u0442\\u043E\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"media-option\",\n        onClick: () => handleMediaOptionClick('document'),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), \"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"media-button\",\n          onClick: () => setShowMediaOptions(!showMediaOptions),\n          title: \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPaperclip\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"message-input\",\n          placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n          value: newMessage,\n          onChange: handleInputChange,\n          onKeyPress: handleKeyPress,\n          rows: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: handleSendMessage,\n          disabled: !newMessage.trim() && selectedFiles.length === 0 || sendingMessage,\n          title: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPaperPlane\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: true,\n        accept: \"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\",\n        onChange: handleFileSelect,\n        className: \"file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"context-menu\",\n      style: {\n        position: 'fixed',\n        left: contextMenu.x,\n        top: contextMenu.y,\n        zIndex: 1000\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"context-menu-item\",\n        onClick: () => {\n          setEditingMessageId(contextMenu.message.id);\n          setEditText(contextMenu.message.text || '');\n          setContextMenu(null);\n        },\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this), \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"context-menu-item delete\",\n        onClick: () => handleDeleteMessage(contextMenu.message.id),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faTrash\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this), \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }, this), editingMessageId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setEditingMessageId(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit-modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: editText,\n          onChange: e => setEditText(e.target.value),\n          className: \"edit-textarea\",\n          rows: 3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-button\",\n            onClick: () => setEditingMessageId(null),\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTimes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this), \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"save-button\",\n            onClick: handleEditMessage,\n            disabled: !editText.trim(),\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCheck\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this), \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPageTest, \"k4wa3ejJlNGvNFEwYY9NF16dgAA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ChatPageTest;\nexport default ChatPageTest;\nvar _c;\n$RefreshReg$(_c, \"ChatPageTest\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","FontAwesomeIcon","faArrowLeft","faPaperPlane","faEdit","faTrash","faCheck","faTimes","faUser","faMessage","faReply","faImage","faFile","faPaperclip","faFilePdf","faFileWord","faFileText","faFileArchive","jsxDEV","_jsxDEV","ChatPageTest","_s","_chatUser$name","chatId","navigate","messagesEndRef","fileInputRef","messages","setMessages","id","text","sender_id","created_at","Date","toISOString","files","newMessage","setNewMessage","editingMessageId","setEditingMessageId","editText","setEditText","currentUser","name","chatUser","city","isLoading","setIsLoading","isTyping","setIsTyping","typingUsers","setTypingUsers","Set","contextMenu","setContextMenu","modalMessage","setModalMessage","swipeStartX","setSwipeStartX","swipeStartY","setSwipeStartY","replyToMessage","setReplyToMessage","selectedFiles","setSelectedFiles","showMediaOptions","setShowMediaOptions","sendingMessage","setSendingMessage","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","length","newMsg","now","map","file","index","filename","file_size","size","file_type","type","prev","setTimeout","replyMsg","Math","random","error","console","handleEditMessage","msg","edited_at","handleDeleteMessage","messageId","filter","handleKeyPress","e","key","shiftKey","preventDefault","handleInputChange","target","value","handleFileSelect","Array","from","removeFile","_","i","handleMediaOptionClick","accept","click","getFileIcon","extension","split","pop","toLowerCase","formatFileSize","bytes","k","sizes","floor","log","parseFloat","pow","toFixed","handleContextMenu","message","x","clientX","y","clientY","closeContextMenu","formatTime","dateString","date","toLocaleTimeString","hour","minute","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","src","alt","onError","style","display","nextSibling","width","height","backgroundColor","color","alignItems","justifyContent","fontSize","fontWeight","charAt","onContextMenu","ref","title","placeholder","onChange","onKeyPress","rows","disabled","multiple","position","left","top","zIndex","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/Wlad/OneDrive/Desktop/kwork_site/src/components/ChatPage/ChatPageTest.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { \n  faArrowLeft, \n  faPaperPlane, \n  faEdit, \n  faTrash, \n  faCheck, \n  faTimes,\n  faUser,\n  faMessage,\n  faReply,\n  faImage,\n  faFile,\n  faPaperclip,\n  faFilePdf,\n  faFileWord,\n  faFileText,\n  faFileArchive\n} from '@fortawesome/free-solid-svg-icons';\nimport './ChatPage.css';\n\nconst ChatPageTest = () => {\n  const { chatId } = useParams();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  const [messages, setMessages] = useState([\n    {\n      id: 1,\n      text: 'Привет! Как дела?',\n      sender_id: 2,\n      created_at: new Date().toISOString(),\n      files: []\n    },\n    {\n      id: 2,\n      text: 'Привет! Всё отлично, спасибо!',\n      sender_id: 1,\n      created_at: new Date().toISOString(),\n      files: []\n    }\n  ]);\n  const [newMessage, setNewMessage] = useState('');\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editText, setEditText] = useState('');\n  const [currentUser] = useState({ id: 1, name: 'Вы' });\n  const [chatUser] = useState({ id: 2, name: 'Тестовый пользователь', city: 'Москва' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingUsers, setTypingUsers] = useState(new Set());\n  const [contextMenu, setContextMenu] = useState(null);\n  const [modalMessage, setModalMessage] = useState(null);\n  const [swipeStartX, setSwipeStartX] = useState(null);\n  const [swipeStartY, setSwipeStartY] = useState(null);\n  const [replyToMessage, setReplyToMessage] = useState(null);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [showMediaOptions, setShowMediaOptions] = useState(false);\n  const [sendingMessage, setSendingMessage] = useState(false);\n\n  // Автоскролл к последнему сообщению\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async () => {\n    if ((!newMessage.trim() && selectedFiles.length === 0) || sendingMessage) return;\n\n    try {\n      setSendingMessage(true);\n      \n      // Создаем новое сообщение\n      const newMsg = {\n        id: Date.now(),\n        text: newMessage.trim(),\n        sender_id: currentUser.id,\n        created_at: new Date().toISOString(),\n        files: selectedFiles.map((file, index) => ({\n          id: index + 1,\n          filename: file.name,\n          file_size: file.size,\n          file_type: file.type\n        }))\n      };\n      \n      setMessages(prev => [...prev, newMsg]);\n      setNewMessage('');\n      setSelectedFiles([]);\n      setShowMediaOptions(false);\n      \n      // Симуляция ответа собеседника\n      setTimeout(() => {\n        const replyMsg = {\n          id: Date.now() + 1,\n          text: 'Спасибо за сообщение!',\n          sender_id: chatUser.id,\n          created_at: new Date().toISOString(),\n          files: []\n        };\n        setMessages(prev => [...prev, replyMsg]);\n      }, 1000 + Math.random() * 2000);\n      \n    } catch (error) {\n      console.error('Ошибка отправки сообщения:', error);\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n\n  const handleEditMessage = async () => {\n    if (!editText.trim()) return;\n\n    try {\n      setMessages(prev => \n        prev.map(msg => \n          msg.id === editingMessageId \n            ? { ...msg, text: editText.trim(), edited_at: new Date().toISOString() }\n            : msg\n        )\n      );\n      setEditingMessageId(null);\n      setEditText('');\n    } catch (error) {\n      console.error('Ошибка редактирования сообщения:', error);\n    }\n  };\n\n  const handleDeleteMessage = async (messageId) => {\n    try {\n      setMessages(prev => prev.filter(msg => msg.id !== messageId));\n      setContextMenu(null);\n    } catch (error) {\n      console.error('Ошибка удаления сообщения:', error);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setNewMessage(e.target.value);\n  };\n\n  const handleFileSelect = (e) => {\n    const files = Array.from(e.target.files);\n    setSelectedFiles(prev => [...prev, ...files]);\n    setShowMediaOptions(false);\n  };\n\n  const removeFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleMediaOptionClick = (type) => {\n    if (type === 'photo') {\n      fileInputRef.current.accept = 'image/*';\n    } else if (type === 'document') {\n      fileInputRef.current.accept = '.pdf,.doc,.docx,.txt,.zip,.rar';\n    }\n    fileInputRef.current.click();\n  };\n\n  const getFileIcon = (file) => {\n    const extension = file.name.split('.').pop().toLowerCase();\n    switch (extension) {\n      case 'pdf':\n        return faFilePdf;\n      case 'doc':\n      case 'docx':\n        return faFileWord;\n      case 'txt':\n        return faFileText;\n      case 'zip':\n      case 'rar':\n        return faFileArchive;\n      default:\n        return faFile;\n    }\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleContextMenu = (e, message) => {\n    e.preventDefault();\n    if (message.sender_id === currentUser.id) {\n      setContextMenu({\n        x: e.clientX,\n        y: e.clientY,\n        message: message\n      });\n    }\n  };\n\n  const closeContextMenu = () => {\n    setContextMenu(null);\n  };\n\n  const formatTime = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('ru-RU', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"chat-page\">\n        <div className=\"loading\">Загрузка...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"chat-page\" onClick={closeContextMenu}>\n      {/* Заголовок чата */}\n      <div className=\"chat-header\">\n        <button className=\"back-button\" onClick={() => navigate('/friends')}>\n          <FontAwesomeIcon icon={faArrowLeft} />\n        </button>\n        <div className=\"chat-user-info\">\n          <div className=\"user-avatar\">\n            <img \n              src=\"/default-avatar.png\" \n              alt={chatUser?.name || 'Пользователь'}\n              onError={(e) => {\n                e.target.style.display = 'none';\n                e.target.nextSibling.style.display = 'flex';\n              }}\n            />\n            <div \n              style={{ \n                display: 'none', \n                width: '100%', \n                height: '100%', \n                backgroundColor: '#8b5cf6', \n                color: 'white', \n                alignItems: 'center', \n                justifyContent: 'center', \n                fontSize: '18px',\n                fontWeight: 'bold'\n              }}\n            >\n              {chatUser?.name?.charAt(0) || 'Т'}\n            </div>\n          </div>\n          <div className=\"user-details\">\n            <h3 className=\"user-name\">{chatUser?.name || 'Пользователь'}</h3>\n            <span className=\"user-city\">📍 {chatUser?.city || 'Город не указан'}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Контейнер сообщений */}\n      <div className=\"messages-container\">\n        <div className=\"messages-list\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`message ${message.sender_id === currentUser.id ? 'my-message' : 'incoming-message'}`}\n              onContextMenu={(e) => handleContextMenu(e, message)}\n            >\n              <div className=\"message-content\">\n                {message.text && (\n                  <p className=\"message-text\">{message.text}</p>\n                )}\n                \n                {/* Файлы сообщения */}\n                {message.files && message.files.length > 0 && (\n                  <div className=\"message-files\">\n                    {message.files.map((file) => (\n                      <div key={file.id} className=\"message-file\">\n                        <FontAwesomeIcon icon={getFileIcon(file)} />\n                        <span className=\"file-name\">{file.filename}</span>\n                        <span className=\"file-size\">({formatFileSize(file.file_size)})</span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                \n                <div className=\"message-meta\">\n                  <span className=\"message-time\">{formatTime(message.created_at)}</span>\n                  {message.edited_at && (\n                    <span className=\"edited-indicator\">(ред.)</span>\n                  )}\n                  {message.sender_id === currentUser.id && (\n                    <span className=\"message-status\">✓</span>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n          \n          {/* Индикатор набора текста */}\n          {typingUsers.size > 0 && (\n            <div className=\"typing-indicator\">\n              <span>Печатает...</span>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Выбранные файлы */}\n      {selectedFiles.length > 0 && (\n        <div className=\"selected-files\">\n          {selectedFiles.map((file, index) => (\n            <div key={index} className=\"selected-file\">\n              <FontAwesomeIcon icon={getFileIcon(file)} />\n              <span className=\"file-name\">{file.name}</span>\n              <span className=\"file-size\">({formatFileSize(file.size)})</span>\n              <button \n                className=\"remove-file-btn\"\n                onClick={() => removeFile(index)}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Опции медиа */}\n      {showMediaOptions && (\n        <div className=\"media-options\">\n          <button \n            className=\"media-option\"\n            onClick={() => handleMediaOptionClick('photo')}\n          >\n            <FontAwesomeIcon icon={faImage} />\n            Фото\n          </button>\n          <button \n            className=\"media-option\"\n            onClick={() => handleMediaOptionClick('document')}\n          >\n            <FontAwesomeIcon icon={faFile} />\n            Документ\n          </button>\n        </div>\n      )}\n\n      {/* Форма ввода */}\n      <div className=\"message-input-container\">\n        <div className=\"message-input-wrapper\">\n          <button \n            className=\"media-button\"\n            onClick={() => setShowMediaOptions(!showMediaOptions)}\n            title=\"Прикрепить файл\"\n          >\n            <FontAwesomeIcon icon={faPaperclip} />\n          </button>\n          \n          <textarea\n            className=\"message-input\"\n            placeholder=\"Сообщение\"\n            value={newMessage}\n            onChange={handleInputChange}\n            onKeyPress={handleKeyPress}\n            rows={1}\n          />\n          \n          <button \n            className=\"send-button\"\n            onClick={handleSendMessage}\n            disabled={(!newMessage.trim() && selectedFiles.length === 0) || sendingMessage}\n            title=\"Отправить\"\n          >\n            <FontAwesomeIcon icon={faPaperPlane} />\n          </button>\n        </div>\n\n        {/* Скрытый input для файлов */}\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          accept=\"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\"\n          onChange={handleFileSelect}\n          className=\"file-input\"\n        />\n      </div>\n\n      {/* Контекстное меню */}\n      {contextMenu && (\n        <div\n          className=\"context-menu\"\n          style={{\n            position: 'fixed',\n            left: contextMenu.x,\n            top: contextMenu.y,\n            zIndex: 1000\n          }}\n        >\n          <button\n            className=\"context-menu-item\"\n            onClick={() => {\n              setEditingMessageId(contextMenu.message.id);\n              setEditText(contextMenu.message.text || '');\n              setContextMenu(null);\n            }}\n          >\n            <FontAwesomeIcon icon={faEdit} />\n            Редактировать\n          </button>\n          <button\n            className=\"context-menu-item delete\"\n            onClick={() => handleDeleteMessage(contextMenu.message.id)}\n          >\n            <FontAwesomeIcon icon={faTrash} />\n            Удалить\n          </button>\n        </div>\n      )}\n\n      {/* Модальное окно редактирования */}\n      {editingMessageId && (\n        <div className=\"modal-overlay\" onClick={() => setEditingMessageId(null)}>\n          <div className=\"edit-modal\" onClick={(e) => e.stopPropagation()}>\n            <h3>Редактировать сообщение</h3>\n            <textarea\n              value={editText}\n              onChange={(e) => setEditText(e.target.value)}\n              className=\"edit-textarea\"\n              rows={3}\n            />\n            <div className=\"modal-buttons\">\n              <button\n                className=\"cancel-button\"\n                onClick={() => setEditingMessageId(null)}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n                Отмена\n              </button>\n              <button\n                className=\"save-button\"\n                onClick={handleEditMessage}\n                disabled={!editText.trim()}\n              >\n                <FontAwesomeIcon icon={faCheck} />\n                Сохранить\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatPageTest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}