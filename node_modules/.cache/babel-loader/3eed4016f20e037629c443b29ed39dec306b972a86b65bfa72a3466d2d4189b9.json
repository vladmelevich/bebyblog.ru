{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wlad\\\\OneDrive\\\\Desktop\\\\kwork_site\\\\src\\\\components\\\\ChatPage\\\\ChatPageTest.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faPaperPlane, faEdit, faTrash, faCheck, faTimes, faUser, faMessage, faReply, faImage, faFile, faPaperclip, faFilePdf, faFileWord, faFileText, faFileArchive } from '@fortawesome/free-solid-svg-icons';\nimport './ChatPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPageTest = () => {\n  _s();\n  const {\n    chatId\n  } = useParams();\n  const navigate = useNavigate();\n  const messagesEndRef = useRef(null);\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: 'Привет! Как дела?',\n    sender_id: 2,\n    created_at: new Date().toISOString(),\n    files: []\n  }, {\n    id: 2,\n    text: 'Привет! Всё отлично, спасибо!',\n    sender_id: 1,\n    created_at: new Date().toISOString(),\n    files: []\n  }]);\n  const [newMessage, setNewMessage] = useState('');\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editText, setEditText] = useState('');\n  const [currentUser] = useState({\n    id: 1,\n    name: 'Вы'\n  });\n  const [chatUser] = useState({\n    id: 2,\n    name: 'Тестовый пользователь',\n    city: 'Москва'\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [typingUsers, setTypingUsers] = useState(new Set());\n  const [contextMenu, setContextMenu] = useState(null);\n  const [modalMessage, setModalMessage] = useState(null);\n  const [swipeStartX, setSwipeStartX] = useState(null);\n  const [swipeStartY, setSwipeStartY] = useState(null);\n  const [replyToMessage, setReplyToMessage] = useState(null);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [showMediaOptions, setShowMediaOptions] = useState(false);\n  const [sendingMessage, setSendingMessage] = useState(false);\n\n  // Автоскролл к последнему сообщению\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() && selectedFiles.length === 0 || sendingMessage) return;\n    try {\n      setSendingMessage(true);\n\n      // Создаем новое сообщение\n      const newMsg = {\n        id: Date.now(),\n        text: newMessage.trim(),\n        sender_id: currentUser.id,\n        created_at: new Date().toISOString(),\n        files: selectedFiles.map((file, index) => ({\n          id: index + 1,\n          filename: file.name,\n          file_size: file.size,\n          file_type: file.type\n        }))\n      };\n      setMessages(prev => [...prev, newMsg]);\n      setNewMessage('');\n      setSelectedFiles([]);\n      setShowMediaOptions(false);\n\n      // Симуляция ответа собеседника\n      setTimeout(() => {\n        const replyMsg = {\n          id: Date.now() + 1,\n          text: 'Спасибо за сообщение!',\n          sender_id: chatUser.id,\n          created_at: new Date().toISOString(),\n          files: []\n        };\n        setMessages(prev => [...prev, replyMsg]);\n      }, 1000 + Math.random() * 2000);\n    } catch (error) {\n      console.error('Ошибка отправки сообщения:', error);\n    } finally {\n      setSendingMessage(false);\n    }\n  };\n  const handleEditMessage = async () => {\n    if (!editText.trim()) return;\n    try {\n      setMessages(prev => prev.map(msg => msg.id === editingMessageId ? {\n        ...msg,\n        text: editText.trim(),\n        edited_at: new Date().toISOString()\n      } : msg));\n      setEditingMessageId(null);\n      setEditText('');\n    } catch (error) {\n      console.error('Ошибка редактирования сообщения:', error);\n    }\n  };\n  const handleDeleteMessage = async messageId => {\n    try {\n      setMessages(prev => prev.filter(msg => msg.id !== messageId));\n      setContextMenu(null);\n    } catch (error) {\n      console.error('Ошибка удаления сообщения:', error);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const handleInputChange = e => {\n    setNewMessage(e.target.value);\n  };\n  const handleFileSelect = e => {\n    const files = Array.from(e.target.files);\n    setSelectedFiles(prev => [...prev, ...files]);\n    setShowMediaOptions(false);\n  };\n  const removeFile = index => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  const handleMediaOptionClick = type => {\n    if (type === 'photo') {\n      fileInputRef.current.accept = 'image/*';\n    } else if (type === 'document') {\n      fileInputRef.current.accept = '.pdf,.doc,.docx,.txt,.zip,.rar';\n    }\n    fileInputRef.current.click();\n  };\n  const getFileIcon = file => {\n    const extension = file.name.split('.').pop().toLowerCase();\n    switch (extension) {\n      case 'pdf':\n        return faFilePdf;\n      case 'doc':\n      case 'docx':\n        return faFileWord;\n      case 'txt':\n        return faFileText;\n      case 'zip':\n      case 'rar':\n        return faFileArchive;\n      default:\n        return faFile;\n    }\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n  const handleContextMenu = (e, message) => {\n    e.preventDefault();\n    if (message.sender_id === currentUser.id) {\n      setContextMenu({\n        x: e.clientX,\n        y: e.clientY,\n        message: message\n      });\n    }\n  };\n  const closeContextMenu = () => {\n    setContextMenu(null);\n  };\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('ru-RU', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-page\",\n    onClick: closeContextMenu,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-button\",\n        onClick: () => navigate('/friends'),\n        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faArrowLeft\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-avatar\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/default-avatar.png\",\n            alt: (chatUser === null || chatUser === void 0 ? void 0 : chatUser.name) || 'Пользователь'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"user-name\",\n            children: (chatUser === null || chatUser === void 0 ? void 0 : chatUser.name) || 'Пользователь'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-city\",\n            children: [\"\\uD83D\\uDCCD \", (chatUser === null || chatUser === void 0 ? void 0 : chatUser.city) || 'Город не указан']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-list\",\n        children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.sender_id === currentUser.id ? 'my-message' : 'incoming-message'}`,\n          onContextMenu: e => handleContextMenu(e, message),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [message.text && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"message-text\",\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this), message.files && message.files.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-files\",\n              children: message.files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-file\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: getFileIcon(file)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"file-name\",\n                  children: file.filename\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"file-size\",\n                  children: [\"(\", formatFileSize(file.file_size), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 25\n                }, this)]\n              }, file.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: formatTime(message.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this), message.edited_at && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"edited-indicator\",\n                children: \"(\\u0440\\u0435\\u0434.)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this), message.sender_id === currentUser.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-status\",\n                children: \"\\u2713\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this)), typingUsers.size > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"typing-indicator\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u041F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-files\",\n      children: selectedFiles.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-file\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: getFileIcon(file)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-name\",\n          children: file.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-size\",\n          children: [\"(\", formatFileSize(file.size), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"remove-file-btn\",\n          onClick: () => removeFile(index),\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }, this), showMediaOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"media-option\",\n        onClick: () => handleMediaOptionClick('photo'),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this), \"\\u0424\\u043E\\u0442\\u043E\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"media-option\",\n        onClick: () => handleMediaOptionClick('document'),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), \"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"media-button\",\n          onClick: () => setShowMediaOptions(!showMediaOptions),\n          title: \"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPaperclip\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"message-input\",\n          placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n          value: newMessage,\n          onChange: handleInputChange,\n          onKeyPress: handleKeyPress,\n          rows: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: handleSendMessage,\n          disabled: !newMessage.trim() && selectedFiles.length === 0 || sendingMessage,\n          title: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPaperPlane\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: true,\n        accept: \"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\",\n        onChange: handleFileSelect,\n        className: \"file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"context-menu\",\n      style: {\n        position: 'fixed',\n        left: contextMenu.x,\n        top: contextMenu.y,\n        zIndex: 1000\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"context-menu-item\",\n        onClick: () => {\n          setEditingMessageId(contextMenu.message.id);\n          setEditText(contextMenu.message.text || '');\n          setContextMenu(null);\n        },\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this), \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"context-menu-item delete\",\n        onClick: () => handleDeleteMessage(contextMenu.message.id),\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faTrash\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this), editingMessageId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setEditingMessageId(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit-modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: editText,\n          onChange: e => setEditText(e.target.value),\n          className: \"edit-textarea\",\n          rows: 3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-button\",\n            onClick: () => setEditingMessageId(null),\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTimes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this), \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"save-button\",\n            onClick: handleEditMessage,\n            disabled: !editText.trim(),\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCheck\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 17\n            }, this), \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPageTest, \"0LMTyxbCrIW1S4McOPZF6UVfkLc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ChatPageTest;\nexport default ChatPageTest;\nvar _c;\n$RefreshReg$(_c, \"ChatPageTest\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","FontAwesomeIcon","faArrowLeft","faPaperPlane","faEdit","faTrash","faCheck","faTimes","faUser","faMessage","faReply","faImage","faFile","faPaperclip","faFilePdf","faFileWord","faFileText","faFileArchive","jsxDEV","_jsxDEV","ChatPageTest","_s","chatId","navigate","messagesEndRef","messages","setMessages","id","text","sender_id","created_at","Date","toISOString","files","newMessage","setNewMessage","editingMessageId","setEditingMessageId","editText","setEditText","currentUser","name","chatUser","city","isLoading","setIsLoading","isTyping","setIsTyping","typingUsers","setTypingUsers","Set","contextMenu","setContextMenu","modalMessage","setModalMessage","swipeStartX","setSwipeStartX","swipeStartY","setSwipeStartY","replyToMessage","setReplyToMessage","selectedFiles","setSelectedFiles","showMediaOptions","setShowMediaOptions","sendingMessage","setSendingMessage","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","length","newMsg","now","map","file","index","filename","file_size","size","file_type","type","prev","setTimeout","replyMsg","Math","random","error","console","handleEditMessage","msg","edited_at","handleDeleteMessage","messageId","filter","handleKeyPress","e","key","shiftKey","preventDefault","handleInputChange","target","value","handleFileSelect","Array","from","removeFile","_","i","handleMediaOptionClick","fileInputRef","accept","click","getFileIcon","extension","split","pop","toLowerCase","formatFileSize","bytes","k","sizes","floor","log","parseFloat","pow","toFixed","handleContextMenu","message","x","clientX","y","clientY","closeContextMenu","formatTime","dateString","date","toLocaleTimeString","hour","minute","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","src","alt","onContextMenu","ref","title","placeholder","onChange","onKeyPress","rows","disabled","multiple","style","position","left","top","zIndex","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/Wlad/OneDrive/Desktop/kwork_site/src/components/ChatPage/ChatPageTest.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { \r\n  faArrowLeft, \r\n  faPaperPlane, \r\n  faEdit, \r\n  faTrash, \r\n  faCheck, \r\n  faTimes,\r\n  faUser,\r\n  faMessage,\r\n  faReply,\r\n  faImage,\r\n  faFile,\r\n  faPaperclip,\r\n  faFilePdf,\r\n  faFileWord,\r\n  faFileText,\r\n  faFileArchive\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport './ChatPage.css';\r\n\r\nconst ChatPageTest = () => {\r\n  const { chatId } = useParams();\r\n  const navigate = useNavigate();\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      id: 1,\r\n      text: 'Привет! Как дела?',\r\n      sender_id: 2,\r\n      created_at: new Date().toISOString(),\r\n      files: []\r\n    },\r\n    {\r\n      id: 2,\r\n      text: 'Привет! Всё отлично, спасибо!',\r\n      sender_id: 1,\r\n      created_at: new Date().toISOString(),\r\n      files: []\r\n    }\r\n  ]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [editingMessageId, setEditingMessageId] = useState(null);\r\n  const [editText, setEditText] = useState('');\r\n  const [currentUser] = useState({ id: 1, name: 'Вы' });\r\n  const [chatUser] = useState({ id: 2, name: 'Тестовый пользователь', city: 'Москва' });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [typingUsers, setTypingUsers] = useState(new Set());\r\n  const [contextMenu, setContextMenu] = useState(null);\r\n  const [modalMessage, setModalMessage] = useState(null);\r\n  const [swipeStartX, setSwipeStartX] = useState(null);\r\n  const [swipeStartY, setSwipeStartY] = useState(null);\r\n  const [replyToMessage, setReplyToMessage] = useState(null);\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [showMediaOptions, setShowMediaOptions] = useState(false);\r\n  const [sendingMessage, setSendingMessage] = useState(false);\r\n\r\n  // Автоскролл к последнему сообщению\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if ((!newMessage.trim() && selectedFiles.length === 0) || sendingMessage) return;\r\n\r\n    try {\r\n      setSendingMessage(true);\r\n      \r\n      // Создаем новое сообщение\r\n      const newMsg = {\r\n        id: Date.now(),\r\n        text: newMessage.trim(),\r\n        sender_id: currentUser.id,\r\n        created_at: new Date().toISOString(),\r\n        files: selectedFiles.map((file, index) => ({\r\n          id: index + 1,\r\n          filename: file.name,\r\n          file_size: file.size,\r\n          file_type: file.type\r\n        }))\r\n      };\r\n      \r\n      setMessages(prev => [...prev, newMsg]);\r\n      setNewMessage('');\r\n      setSelectedFiles([]);\r\n      setShowMediaOptions(false);\r\n      \r\n      // Симуляция ответа собеседника\r\n      setTimeout(() => {\r\n        const replyMsg = {\r\n          id: Date.now() + 1,\r\n          text: 'Спасибо за сообщение!',\r\n          sender_id: chatUser.id,\r\n          created_at: new Date().toISOString(),\r\n          files: []\r\n        };\r\n        setMessages(prev => [...prev, replyMsg]);\r\n      }, 1000 + Math.random() * 2000);\r\n      \r\n    } catch (error) {\r\n      console.error('Ошибка отправки сообщения:', error);\r\n    } finally {\r\n      setSendingMessage(false);\r\n    }\r\n  };\r\n\r\n  const handleEditMessage = async () => {\r\n    if (!editText.trim()) return;\r\n\r\n    try {\r\n      setMessages(prev => \r\n        prev.map(msg => \r\n          msg.id === editingMessageId \r\n            ? { ...msg, text: editText.trim(), edited_at: new Date().toISOString() }\r\n            : msg\r\n        )\r\n      );\r\n      setEditingMessageId(null);\r\n      setEditText('');\r\n    } catch (error) {\r\n      console.error('Ошибка редактирования сообщения:', error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteMessage = async (messageId) => {\r\n    try {\r\n      setMessages(prev => prev.filter(msg => msg.id !== messageId));\r\n      setContextMenu(null);\r\n    } catch (error) {\r\n      console.error('Ошибка удаления сообщения:', error);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setNewMessage(e.target.value);\r\n  };\r\n\r\n  const handleFileSelect = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    setSelectedFiles(prev => [...prev, ...files]);\r\n    setShowMediaOptions(false);\r\n  };\r\n\r\n  const removeFile = (index) => {\r\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleMediaOptionClick = (type) => {\r\n    if (type === 'photo') {\r\n      fileInputRef.current.accept = 'image/*';\r\n    } else if (type === 'document') {\r\n      fileInputRef.current.accept = '.pdf,.doc,.docx,.txt,.zip,.rar';\r\n    }\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  const getFileIcon = (file) => {\r\n    const extension = file.name.split('.').pop().toLowerCase();\r\n    switch (extension) {\r\n      case 'pdf':\r\n        return faFilePdf;\r\n      case 'doc':\r\n      case 'docx':\r\n        return faFileWord;\r\n      case 'txt':\r\n        return faFileText;\r\n      case 'zip':\r\n      case 'rar':\r\n        return faFileArchive;\r\n      default:\r\n        return faFile;\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const handleContextMenu = (e, message) => {\r\n    e.preventDefault();\r\n    if (message.sender_id === currentUser.id) {\r\n      setContextMenu({\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n        message: message\r\n      });\r\n    }\r\n  };\r\n\r\n  const closeContextMenu = () => {\r\n    setContextMenu(null);\r\n  };\r\n\r\n  const formatTime = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleTimeString('ru-RU', { \r\n      hour: '2-digit', \r\n      minute: '2-digit' \r\n    });\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"chat-page\">\r\n        <div className=\"loading\">Загрузка...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-page\" onClick={closeContextMenu}>\r\n      {/* Заголовок чата */}\r\n      <div className=\"chat-header\">\r\n        <button className=\"back-button\" onClick={() => navigate('/friends')}>\r\n          <FontAwesomeIcon icon={faArrowLeft} />\r\n        </button>\r\n        <div className=\"chat-user-info\">\r\n          <div className=\"user-avatar\">\r\n            <img \r\n              src=\"/default-avatar.png\" \r\n              alt={chatUser?.name || 'Пользователь'} \r\n            />\r\n          </div>\r\n          <div className=\"user-details\">\r\n            <h3 className=\"user-name\">{chatUser?.name || 'Пользователь'}</h3>\r\n            <span className=\"user-city\">📍 {chatUser?.city || 'Город не указан'}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Контейнер сообщений */}\r\n      <div className=\"messages-container\">\r\n        <div className=\"messages-list\">\r\n          {messages.map((message) => (\r\n            <div\r\n              key={message.id}\r\n              className={`message ${message.sender_id === currentUser.id ? 'my-message' : 'incoming-message'}`}\r\n              onContextMenu={(e) => handleContextMenu(e, message)}\r\n            >\r\n              <div className=\"message-content\">\r\n                {message.text && (\r\n                  <p className=\"message-text\">{message.text}</p>\r\n                )}\r\n                \r\n                {/* Файлы сообщения */}\r\n                {message.files && message.files.length > 0 && (\r\n                  <div className=\"message-files\">\r\n                    {message.files.map((file) => (\r\n                      <div key={file.id} className=\"message-file\">\r\n                        <FontAwesomeIcon icon={getFileIcon(file)} />\r\n                        <span className=\"file-name\">{file.filename}</span>\r\n                        <span className=\"file-size\">({formatFileSize(file.file_size)})</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"message-meta\">\r\n                  <span className=\"message-time\">{formatTime(message.created_at)}</span>\r\n                  {message.edited_at && (\r\n                    <span className=\"edited-indicator\">(ред.)</span>\r\n                  )}\r\n                  {message.sender_id === currentUser.id && (\r\n                    <span className=\"message-status\">✓</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          \r\n          {/* Индикатор набора текста */}\r\n          {typingUsers.size > 0 && (\r\n            <div className=\"typing-indicator\">\r\n              <span>Печатает...</span>\r\n            </div>\r\n          )}\r\n          \r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Выбранные файлы */}\r\n      {selectedFiles.length > 0 && (\r\n        <div className=\"selected-files\">\r\n          {selectedFiles.map((file, index) => (\r\n            <div key={index} className=\"selected-file\">\r\n              <FontAwesomeIcon icon={getFileIcon(file)} />\r\n              <span className=\"file-name\">{file.name}</span>\r\n              <span className=\"file-size\">({formatFileSize(file.size)})</span>\r\n              <button \r\n                className=\"remove-file-btn\"\r\n                onClick={() => removeFile(index)}\r\n              >\r\n                <FontAwesomeIcon icon={faTimes} />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Опции медиа */}\r\n      {showMediaOptions && (\r\n        <div className=\"media-options\">\r\n          <button \r\n            className=\"media-option\"\r\n            onClick={() => handleMediaOptionClick('photo')}\r\n          >\r\n            <FontAwesomeIcon icon={faImage} />\r\n            Фото\r\n          </button>\r\n          <button \r\n            className=\"media-option\"\r\n            onClick={() => handleMediaOptionClick('document')}\r\n          >\r\n            <FontAwesomeIcon icon={faFile} />\r\n            Документ\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Форма ввода */}\r\n      <div className=\"message-input-container\">\r\n        <div className=\"message-input-wrapper\">\r\n          <button \r\n            className=\"media-button\"\r\n            onClick={() => setShowMediaOptions(!showMediaOptions)}\r\n            title=\"Прикрепить файл\"\r\n          >\r\n            <FontAwesomeIcon icon={faPaperclip} />\r\n          </button>\r\n          \r\n          <textarea\r\n            className=\"message-input\"\r\n            placeholder=\"Сообщение\"\r\n            value={newMessage}\r\n            onChange={handleInputChange}\r\n            onKeyPress={handleKeyPress}\r\n            rows={1}\r\n          />\r\n          \r\n          <button \r\n            className=\"send-button\"\r\n            onClick={handleSendMessage}\r\n            disabled={(!newMessage.trim() && selectedFiles.length === 0) || sendingMessage}\r\n            title=\"Отправить\"\r\n          >\r\n            <FontAwesomeIcon icon={faPaperPlane} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Скрытый input для файлов */}\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          accept=\"image/*,.pdf,.doc,.docx,.txt,.zip,.rar\"\r\n          onChange={handleFileSelect}\r\n          className=\"file-input\"\r\n        />\r\n      </div>\r\n\r\n      {/* Контекстное меню */}\r\n      {contextMenu && (\r\n        <div\r\n          className=\"context-menu\"\r\n          style={{\r\n            position: 'fixed',\r\n            left: contextMenu.x,\r\n            top: contextMenu.y,\r\n            zIndex: 1000\r\n          }}\r\n        >\r\n          <button\r\n            className=\"context-menu-item\"\r\n            onClick={() => {\r\n              setEditingMessageId(contextMenu.message.id);\r\n              setEditText(contextMenu.message.text || '');\r\n              setContextMenu(null);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faEdit} />\r\n            Редактировать\r\n          </button>\r\n          <button\r\n            className=\"context-menu-item delete\"\r\n            onClick={() => handleDeleteMessage(contextMenu.message.id)}\r\n          >\r\n            <FontAwesomeIcon icon={faTrash} />\r\n            Удалить\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Модальное окно редактирования */}\r\n      {editingMessageId && (\r\n        <div className=\"modal-overlay\" onClick={() => setEditingMessageId(null)}>\r\n          <div className=\"edit-modal\" onClick={(e) => e.stopPropagation()}>\r\n            <h3>Редактировать сообщение</h3>\r\n            <textarea\r\n              value={editText}\r\n              onChange={(e) => setEditText(e.target.value)}\r\n              className=\"edit-textarea\"\r\n              rows={3}\r\n            />\r\n            <div className=\"modal-buttons\">\r\n              <button\r\n                className=\"cancel-button\"\r\n                onClick={() => setEditingMessageId(null)}\r\n              >\r\n                <FontAwesomeIcon icon={faTimes} />\r\n                Отмена\r\n              </button>\r\n              <button\r\n                className=\"save-button\"\r\n                onClick={handleEditMessage}\r\n                disabled={!editText.trim()}\r\n              >\r\n                <FontAwesomeIcon icon={faCheck} />\r\n                Сохранить\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPageTest;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}